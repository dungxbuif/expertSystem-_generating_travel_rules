{"version":3,"sources":["config/PageType.js","components/Menu.js","apis/index.js","components/CreateRules.js","components/Events.js","components/Rules.js","components/ManageEvents.js","process/index.js","components/FindPlaces.js","App.js","index.js"],"names":["PageType","Menu","getAllEvents","rules","setPage","NavItem","props","useState","open","setOpen","className","href","onClick","icon","children","DropdownMenu","menuHeight","setMenuHeight","dropdownRef","useRef","useEffect","current","firstChild","offsetHeight","DropdownItem","e","testOnClick","leftIcon","rightIcon","style","height","zIndex","ref","goToMenu","createFile","fileText","name","element","document","createElement","file","Blob","type","URL","createObjectURL","download","body","appendChild","click","a","target","innerText","includes","createNewRule","data","axios","post","createEvent","CreateRules","selectData","loadAllRule","selectedOption","setSelectedOption","events","setEvents","result","setResult","reset","handleSave","sendResult","value","sendData","toast","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","api","res","code","dismiss","success","warning","message","error","closeMenuOnSelect","onChange","handleChange","isMulti","options","placeholder","isDisabled","length","map","item","handleOnClick","role","ele","index","Events","handleDelete","scope","rowSpan","label","Rules","cursor","join","id","setOptions","push","eventType","ID","event","defaultValue","aria-label","aria-describedby","KET_LUAN","SU_KIEN_NGOAI_LE","suKienNgoaiLe","kqNgoaiLe","LOG","ketQuaTungSuKien","lastResult","getDuplicateValue","arr","dict","reduce","b","Object","keys","filter","ketQuaToanBo","suKienGiaThiet","tapLuatBanDau","maTapLuatBanDau","MA_TAP_LUAT","khoiTaoTapLuatBanDau","tapLuatThoa","i","flag","tapKetLuan","timLuatThoa","xetLuatDauTien","maLuatThoa","forEach","maLuat","every","taoLogLuatThoa","tmp","_","differenceWith","isEqual","string","formatLuat","shift","tmpLuat","kiemTraKetQua","luat","REULTS","split","ketQua","charAt","isEmpty","xetToanBoSuKien","unshift","indexOf","xetTungSuKien","eachEvents","ketQuaTrungLap","tatCaCacKQ","Set","suggests","FindPlaces","suggest","setSuggest","log","setLog","setLastResult","Algorithm","fontSize","App","setSelectData","setRules","page","getAllRules","get","sort","localeCompare","res1","getData","renderPage","newestOnTop","rlt","pauseOnFocusLoss","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8ca562cb.chunk.js","sourcesContent":["export const PageType = {\r\n   CREATE_RULES: 'CreateRules',\r\n   FIND_PLACES: 'FindPlaces',\r\n   MANAGE_EVENTS: 'ManageEvents',\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport '../styles/menu.scss';\r\nimport { toast } from 'react-toastify';\r\nimport { PageType } from '../config/PageType';\r\n\r\nexport default function Menu({ getAllEvents, rules, setPage }) {\r\n   const NavItem = (props) => {\r\n      const [open, setOpen] = useState(false);\r\n\r\n      return (\r\n         <li className='menu-button'>\r\n            <div href='#' className='icon-button' onClick={() => setOpen(!open)}>\r\n               {props.icon}\r\n            </div>\r\n\r\n            {open && props.children}\r\n         </li>\r\n      );\r\n   };\r\n\r\n   const DropdownMenu = () => {\r\n      const [menuHeight, setMenuHeight] = useState(null);\r\n      const dropdownRef = useRef(null);\r\n      useEffect(() => {\r\n         setMenuHeight(dropdownRef.current?.firstChild.offsetHeight);\r\n      }, []);\r\n      const DropdownItem = (props) => {\r\n         return (\r\n            <div href='#' className='menu-item' onClick={(e) => testOnClick(e)}>\r\n               <span className='icon-button'>{props.leftIcon}</span>\r\n               {props.children}\r\n               <span className='icon-right'>{props.rightIcon}</span>\r\n            </div>\r\n         );\r\n      };\r\n\r\n      return (\r\n         <div className='dropdown' style={{ height: menuHeight, zIndex: '1' }} ref={dropdownRef}>\r\n            <div className='menu'>\r\n               <DropdownItem goToMenu='main' leftIcon='📝' onClick={testOnClick}>\r\n                  Tạo tập luật\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon='🗃️' onClick={testOnClick}>\r\n                  Quản lý sự kiện\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon='🗺' onClick={testOnClick}>\r\n                  Tìm địa điểm\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon='📥' onClick={testOnClick}>\r\n                  Tải tập luật\r\n               </DropdownItem>\r\n            </div>\r\n         </div>\r\n      );\r\n   };\r\n\r\n   const createFile = (fileText, name) => {\r\n      const element = document.createElement('a');\r\n      const file = new Blob(fileText, {\r\n         type: 'text/plain',\r\n      });\r\n      element.href = URL.createObjectURL(file);\r\n      element.download = name;\r\n      document.body.appendChild(element); // Required for this to work in FireFox\r\n      element.click();\r\n   };\r\n\r\n   const testOnClick = async (e) => {\r\n      if (e.target.innerText.includes('Tải tập luật')) {\r\n         createFile(rules(), 'Rules.txt');\r\n         createFile(await getAllEvents(), 'Events.txt');\r\n      }\r\n\r\n      if (e.target.innerText.includes('Tìm địa điểm')) {\r\n         setPage(PageType.FIND_PLACES);\r\n      }\r\n\r\n      if (e.target.innerText.includes('Quản lý sự kiện')) {\r\n         setPage(PageType.MANAGE_EVENTS);\r\n      }\r\n\r\n      if (e.target.innerText.includes('Tạo tập luật')) {\r\n         setPage(PageType.CREATE_RULES);\r\n      }\r\n   };\r\n   return (\r\n      <NavItem icon={<i className='fas fa-bars'></i>}>\r\n         <DropdownMenu></DropdownMenu>\r\n      </NavItem>\r\n   );\r\n}\r\n","import axios from 'axios';\r\n\r\nexport const getGroupEvents = () => axios.get('api/spreadsheets/get-group-events');\r\n\r\nexport const getAllEvents = () => axios.get('api/spreadsheets/get-all-events');\r\n\r\nexport const getAllRules = () => axios.get('api/spreadsheets/get-all-rules');\r\n\r\nexport const createNewRule = (data) => axios.post('api/spreadsheets/create-new-rule', data);\r\n\r\nexport const createEventType = (data) => axios.post('api/spreadsheets/create-event-type', data);\r\n\r\nexport const createEvent = (data) => axios.post('api/spreadsheets/create-event', data);\r\n","import React, { useState } from 'react';\r\nimport Select from 'react-select';\r\nimport * as api from '../apis';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\n\r\nexport default function CreateRules({ selectData, children, loadAllRule }) {\r\n   const [selectedOption, setSelectedOption] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n   const [result, setResult] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n   const handleOnClick = () => {\r\n      if (selectedOption && events === null) {\r\n         let data = selectedOption.map((item) => item.value);\r\n         setSelectedOption(null);\r\n         setEvents(data);\r\n         return;\r\n      }\r\n\r\n      if (result === null) {\r\n         setResult(selectedOption);\r\n         setSelectedOption(null);\r\n\r\n         return;\r\n      }\r\n   };\r\n   const reset = () => {\r\n      setEvents(null);\r\n      setResult(null);\r\n   };\r\n   const handleSave = async () => {\r\n      const sendResult = result.value;\r\n      let sendData = {\r\n         result: sendResult,\r\n         events,\r\n      };\r\n      toast.info('🔄 Creating rule !!!', {\r\n         position: 'bottom-right',\r\n         autoClose: false,\r\n         hideProgressBar: false,\r\n         closeOnClick: false,\r\n         pauseOnHover: false,\r\n         draggable: false,\r\n         progress: undefined,\r\n      });\r\n      const res = await api.createNewRule(sendData);\r\n      if (res.data.code === 1) {\r\n         toast.dismiss();\r\n         toast.success('🚀 Creating rule succeed !!!');\r\n         reset();\r\n         loadAllRule();\r\n      } else if (res.data.code === 2) {\r\n         toast.dismiss();\r\n         toast.warning(`📑 ${res.data.message}`);\r\n      } else {\r\n         toast.dismiss();\r\n         toast.error('🔥 Creating rule failed !!!');\r\n      }\r\n   };\r\n   return (\r\n      <div className=\"container\">\r\n         <div className=\"row justify-content-center pt-5 mt-5 \">\r\n            <Select\r\n               closeMenuOnSelect={events ? true : false}\r\n               value={selectedOption}\r\n               onChange={(e) => handleChange(e)}\r\n               isMulti={events ? false : true}\r\n               className=\"w-50\"\r\n               options={selectData}\r\n               placeholder=\"Chọn sự kiện...\"\r\n               isDisabled={selectData.length ? false : true}\r\n            />\r\n            {result ? null : (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-primary mx-1\"\r\n                  onClick={() => handleOnClick()}\r\n               >\r\n                  {events ? 'Chọn kết quả' : 'Chọn tập sự kiện'}\r\n               </button>\r\n            )}\r\n            {!result ? null : (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-warning mx-1\"\r\n                  onClick={() => handleSave()}\r\n               >\r\n                  Lưu\r\n               </button>\r\n            )}\r\n            {events ? (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn  btn-light mx-1\"\r\n                  onClick={() => reset()}\r\n               >\r\n                  Chọn lại\r\n               </button>\r\n            ) : null}\r\n         </div>\r\n         <div className=\"row justify-content-center mt-5\">\r\n            {events && (\r\n               <div className=\"alert alert-success mt-5\" role=\"alert\">\r\n                  {events.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele}</b>\r\n                        {index !== events.length - 1 ? '  ^  ' : '  =>'}\r\n                     </span>\r\n                  ))}\r\n                  {result != null ? <b>{result.value}</b> : null}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className=\"row mt-5 pb-5 justify-content-between\">{children}</div>\r\n      </div>\r\n   );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Events({ events, handleDelete = null }) {\r\n   return (\r\n      <>\r\n         <table className=\"table table-bordered table-hover col-12 bg-white\">\r\n            <thead className=\"thead-dark\">\r\n               <tr>\r\n                  <th scope=\"col\">Loại sự kiện</th>\r\n                  <th scope=\"col\">Sự Kiện</th>\r\n               </tr>\r\n            </thead>\r\n            <tbody>\r\n               {events.map((item) =>\r\n                  item.options.map((ele, index) => (\r\n                     <tr key={index}>\r\n                        {index === 0 ? (\r\n                           <th\r\n                              className=\"font-weight-bold align-middle text-center\"\r\n                              scope=\"row\"\r\n                              rowSpan={item.options.length}\r\n                           >\r\n                              {`${item.value}: ${item.label}`}\r\n                           </th>\r\n                        ) : null}\r\n                        <td className=\"d-flex justify-content-between align-items-center\">\r\n                           {ele.value}{' '}\r\n                           {/* {handleDelete !== null ? (\r\n                              <button className=\"btn btn-danger\">Xóa</button>\r\n                           ) : null} */}\r\n                        </td>\r\n                     </tr>\r\n                  ))\r\n               )}\r\n            </tbody>\r\n         </table>\r\n      </>\r\n   );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Rules({ rules }) {\r\n   return (\r\n      <>\r\n         <table className=\"table table-bordered table-hover bg-white col-12\">\r\n            <thead className=\"thead-dark\">\r\n               <tr>\r\n                  <th scope=\"col\">Sự kiện</th>\r\n                  <th scope=\"col\">Kết quả</th>\r\n               </tr>\r\n            </thead>\r\n            <tbody>\r\n               {rules.map((item) => (\r\n                  <tr key={item.id} style={{ cursor: 'pointer' }}>\r\n                     <td\r\n                        className=\"text-center vertical-align-middle font-weight-bold\"\r\n                        scope=\"row\"\r\n                     >\r\n                        {item.events.join(' ^ ')}\r\n                     </td>\r\n\r\n                     <td className=\"d-flex justify-content-between align-items-center\">\r\n                        <b>{item.result}</b>\r\n                        {/* <button className=\"btn btn-danger\">Xóa</button> */}\r\n                     </td>\r\n                  </tr>\r\n               ))}\r\n            </tbody>\r\n         </table>\r\n      </>\r\n   );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Select from 'react-select';\r\nimport * as api from '../apis';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\n\r\nexport default function CreateRules({ selectData, children, loadAllRule }) {\r\n   const [selectedOption, setSelectedOption] = useState([]);\r\n   const [options, setOptions] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n\r\n   const handleInputOnChange = (e) => {\r\n      let event = e.target.value;\r\n      setEvents(event);\r\n   };\r\n\r\n   useEffect(() => {\r\n      let data = selectData.map((item) => ({\r\n         value: item.value,\r\n         label: item.label,\r\n      }));\r\n      data.push({ value: 'ADD_EVENT_TYPES', label: 'Thêm loại tập luật' });\r\n      setOptions(data);\r\n   }, [selectData]);\r\n\r\n   const handleOnClick = async () => {\r\n      if (!selectedOption || !events) {\r\n         toast.error(`You have to choose Events Type and events`);\r\n         return;\r\n      }\r\n      try {\r\n         toast.info('🔄 Creating event/event type !!!', {\r\n            position: 'bottom-right',\r\n            autoClose: false,\r\n            hideProgressBar: false,\r\n            closeOnClick: false,\r\n            pauseOnHover: false,\r\n            draggable: false,\r\n            progress: undefined,\r\n         });\r\n         let res = null;\r\n\r\n         if (selectedOption.value === 'ADD_EVENT_TYPES') {\r\n            res = await api.createEventType({ eventType: events });\r\n         } else {\r\n            res = await api.createEvent({ ID: selectedOption.value, event: events });\r\n         }\r\n\r\n         toast.dismiss();\r\n         if (res.data.code === 1) {\r\n            toast.success('🚀 Creating event/event type succeed !!!');\r\n         } else {\r\n            toast.error(`🔥 Creating event/event type failed. ${res.data.message}`);\r\n         }\r\n      } catch (ex) {\r\n         toast.error(`🔥 Creating event/events type failed. ${ex.message}`);\r\n      }\r\n   };\r\n   const reset = () => {\r\n      setEvents(null);\r\n   };\r\n   const handleSave = async () => {\r\n      const sendResult = events.value;\r\n      let sendData = {\r\n         result: sendResult,\r\n         events,\r\n      };\r\n      toast.info('🔄 Creating rule !!!', {\r\n         position: 'bottom-right',\r\n         autoClose: false,\r\n         hideProgressBar: false,\r\n         closeOnClick: false,\r\n         pauseOnHover: false,\r\n         draggable: false,\r\n         progress: undefined,\r\n      });\r\n      const res = await api.createNewRule(sendData);\r\n      if (res.data.code === 1) {\r\n         toast.dismiss();\r\n         toast.success('🚀 Creating rule succeed !!!');\r\n         reset();\r\n         loadAllRule();\r\n      } else if (res.data.code === 2) {\r\n         toast.dismiss();\r\n         toast.warning(`📑 ${res.data.message}`);\r\n      } else {\r\n         toast.dismiss();\r\n         toast.error('🔥 Creating rule failed !!!');\r\n      }\r\n   };\r\n   return (\r\n      <div className='container'>\r\n         <div className='row justify-content-center pt-5 mt-5 '>\r\n            {options !== null ? (\r\n               <Select\r\n                  defaultValue={selectedOption[0]}\r\n                  value={selectedOption}\r\n                  onChange={(e) => handleChange(e)}\r\n                  className='col-3'\r\n                  options={options}\r\n                  placeholder='Chọn sự kiện...'\r\n                  isDisabled={selectData.length ? false : true}\r\n               />\r\n            ) : null}\r\n\r\n            <input\r\n               type='text'\r\n               className='form-control col-5'\r\n               placeholder='Nhập nội dung ...'\r\n               aria-label='Nhập sự kiện'\r\n               aria-describedby='basic-addon2'\r\n               onChange={handleInputOnChange}\r\n            />\r\n\r\n            <button type='button' className='btn btn-primary mx-1' onClick={() => handleOnClick()}>\r\n               Thêm nội dung\r\n            </button>\r\n         </div>\r\n\r\n         <div className='row mt-5 pb-5 justify-content-between'>{children}</div>\r\n      </div>\r\n   );\r\n}\r\n","import _ from 'lodash';\r\n\r\n//Khai báo một số hằng\r\nconst KET_LUAN = ['H', 'A'];\r\nconst SU_KIEN_NGOAI_LE = ['C5', 'C3', 'G1', 'G2', 'A4'];\r\n\r\n//Khai báo 1 số biến toàn cục\r\nvar suKienNgoaiLe = [];\r\nvar kqNgoaiLe = [];\r\nvar LOG = [];\r\nvar ketQuaTungSuKien = [];\r\nvar lastResult = [];\r\n\r\nconst excute = (events, rules) => {\r\n   //Reset biến toàn cục\r\n   LOG = [];\r\n   ketQuaTungSuKien = [];\r\n   kqNgoaiLe = [];\r\n   suKienNgoaiLe = [];\r\n   lastResult = [];\r\n\r\n   // Xét thuật toán suy diễn tiến với toàn bộ sự kiện\r\n   let ketQuaToanBo = xetToanBoSuKien(events, rules);\r\n\r\n   if (events.length > 1) LOG.unshift('====Xét toàn bộ sự kiện====');\r\n\r\n   //Xét riêng lẻ từng sự kiện\r\n   eachEvents(events, rules);\r\n\r\n   LOG.push('Chọn ra các kết quả trùng lặp');\r\n   let ketQuaTrungLap = getDuplicateValue(ketQuaTungSuKien);\r\n\r\n   let tatCaCacKQ = [...ketQuaToanBo, ...ketQuaTrungLap];\r\n   if (suKienNgoaiLe.length) {\r\n      LOG.push('Lọc các kết quả ngoại lệ');\r\n\r\n      /* Nếu có sự kiện ngoại lệ mà các sự kiện đó không\r\n       có kết quả trùng thì kết quả cuối cùng cũng không có*/\r\n      if (kqNgoaiLe.length == 0) {\r\n         lastResult = [];\r\n      } else {\r\n         lastResult = getDuplicateValue([...tatCaCacKQ, ...kqNgoaiLe]);\r\n      }\r\n   } else {\r\n      lastResult = [...new Set(tatCaCacKQ)];\r\n   }\r\n\r\n   let suggests = _.differenceWith(tatCaCacKQ, lastResult, _.isEqual).map(\r\n      (item) => item.split(': ')[1],\r\n   );\r\n   LOG.push(\r\n      `==> Kết quả cuối cùng: ${\r\n         lastResult.length > 1\r\n            ? lastResult.map((item) => item.split(': ')[1]).join(' v ')\r\n            : lastResult.length == 1\r\n            ? lastResult[0]\r\n            : 'Không tìm thấy kết quả'\r\n      }`,\r\n   );\r\n\r\n   LOG.push('Kết thúc thuật toán');\r\n\r\n   return { LOG, lastResult, suggests };\r\n};\r\n\r\nfunction eachEvents(events, rules) {\r\n   events.forEach((item) => {\r\n      if (events.length > 1) LOG.push(`====Xét riêng sự kiện ${item}====`);\r\n      xetTungSuKien(item, rules);\r\n   });\r\n}\r\n\r\nfunction getDuplicateValue(arr) {\r\n   const count = (names) => names.reduce((a, b) => ({ ...a, [b]: (a[b] || 0) + 1 }), {});\r\n\r\n   const duplicates = (dict) => Object.keys(dict).filter((a) => dict[a] > 1);\r\n\r\n   //Trả lại mảng các phần từ trùng nhau\r\n   return duplicates(count(arr));\r\n}\r\n\r\nfunction khoiTaoTapLuatBanDau(rules) {\r\n   let arr = [...rules];\r\n   let tapLuatBanDau = {},\r\n      maTapLuatBanDau = [];\r\n   maTapLuatBanDau = arr.map((item) => {\r\n      let MA_TAP_LUAT = item.id;\r\n      tapLuatBanDau[MA_TAP_LUAT] = item;\r\n\r\n      return MA_TAP_LUAT;\r\n   });\r\n\r\n   return { tapLuatBanDau, maTapLuatBanDau };\r\n}\r\n\r\nfunction xetTungSuKien(event, rules) {\r\n   let data = [];\r\n   let flag = false;\r\n   if (SU_KIEN_NGOAI_LE.indexOf(event.split(': ')[0]) !== -1) {\r\n      LOG.push('Phát hiện sự kiện ngoại lệ');\r\n      suKienNgoaiLe.push(event);\r\n   }\r\n\r\n   if (suKienNgoaiLe.length > 1) flag = true;\r\n\r\n   rules.filter((item) => {\r\n      if (item.events.includes(event) && !data.includes(item.result)) {\r\n         data.push(item.result);\r\n         if (SU_KIEN_NGOAI_LE.indexOf(event.split(': ')[0]) !== -1) kqNgoaiLe.push(item.result);\r\n         LOG.push(`Tìm thấy kết quả: ${item.result.split(':')[1]}`);\r\n      }\r\n   });\r\n\r\n   if (flag) {\r\n      let tmp = getDuplicateValue(kqNgoaiLe);\r\n      kqNgoaiLe = tmp;\r\n   }\r\n\r\n   ketQuaTungSuKien = [...ketQuaTungSuKien, ...data];\r\n}\r\n\r\nfunction xetToanBoSuKien(events, rules) {\r\n   let suKienGiaThiet = [...events];\r\n   let { tapLuatBanDau, maTapLuatBanDau } = khoiTaoTapLuatBanDau(rules);\r\n   let tapLuatThoa = [];\r\n   let i = 1;\r\n   let flag = true;\r\n   let tapKetLuan = [];\r\n\r\n   // Chạy thuật toán\r\n   while (flag) {\r\n      LOG.push(`Lần duyệt thứ ${i}, các luật thỏa: `);\r\n      //Tìm các luật thỏa SAT\r\n      timLuatThoa({ events, maTapLuatBanDau });\r\n      if (!tapLuatThoa.length) {\r\n         LOG.push('Không tìm được kết quả');\r\n         break;\r\n      }\r\n      //Xét luật thỏa đầu tiên trong mảng\r\n      xetLuatDauTien();\r\n      i++;\r\n      if (!tapKetLuan.length && !tapLuatThoa.length) {\r\n         LOG.push('Không tìm được kết quả');\r\n         break;\r\n      }\r\n\r\n      if (!tapLuatThoa.length) {\r\n         flag = false;\r\n      }\r\n   }\r\n\r\n   return tapKetLuan;\r\n\r\n   function timLuatThoa() {\r\n      let maLuatThoa = [];\r\n\r\n      // Lặp tất cả để tìm các luật thỏa\r\n      maTapLuatBanDau.forEach((maLuat) => {\r\n         if (tapLuatBanDau[maLuat].events.every((e) => suKienGiaThiet.includes(e))) {\r\n            maLuatThoa.push(maLuat);\r\n            tapLuatThoa.push(maLuat);\r\n            taoLogLuatThoa(maLuat);\r\n         }\r\n      });\r\n\r\n      if (!maLuatThoa.length) LOG.push(`Không tìm thấy luật thỏa`);\r\n\r\n      //Xóa luật thỏa khỏi mảng tất cả các luật\r\n      let tmp = _.differenceWith(maTapLuatBanDau, maLuatThoa, _.isEqual);\r\n      maTapLuatBanDau = tmp;\r\n   }\r\n\r\n   function taoLogLuatThoa(maLuat) {\r\n      let tmpLuat = tapLuatBanDau[maLuat];\r\n\r\n      let string = formatLuat(tmpLuat);\r\n\r\n      LOG.push(`Tìm thấy luật thỏa: ${string}`);\r\n   }\r\n\r\n   function xetLuatDauTien() {\r\n      //Lấy mã của luật đầu tiên\r\n      let maLuat = tapLuatThoa[0];\r\n\r\n      //Xóa luật đầu tiên ra khỏi mảng\r\n      tapLuatThoa.shift();\r\n      let tmpLuat = tapLuatBanDau[maLuat];\r\n      // let cacSuKienMoi = [...tmpLuat.events, tmpLuat.result];\r\n      // //Thêm các sự kiện vào tập luật giả thiết\r\n      // let tmpArr = new Set([...suKienGiaThiet, ...cacSuKienMoi]);\r\n      suKienGiaThiet.push(tmpLuat.result);\r\n\r\n      let string = formatLuat(tmpLuat);\r\n      LOG.push(`=> Xét luật ${string}`);\r\n      // LOG.push(`\\t&#09;=> Tìm thấy kết quả ${string}`);\r\n      //Kiểm tra kết quả đã có trong mệnh đề hay không\r\n      kiemTraKetQua(tmpLuat.result);\r\n   }\r\n\r\n   function formatLuat(luat) {\r\n      let REULTS = luat.result.split(':')[1];\r\n      let string = '';\r\n      for (let i = 0; i < luat.events.length; i++) {\r\n         string += luat.events[i].split(':')[1];\r\n\r\n         let tmp = ' ^ ';\r\n         if (i == luat.events.length - 1) tmp = ' => ';\r\n\r\n         string += tmp;\r\n      }\r\n      return `R${luat.id}: ${string}${REULTS}`;\r\n   }\r\n\r\n   function kiemTraKetQua(ketQua) {\r\n      if (\r\n         _([`${ketQua.charAt(0)}`])\r\n            .differenceWith(KET_LUAN, _.isEqual)\r\n            .isEmpty() &&\r\n         !tapKetLuan.includes(ketQua)\r\n      ) {\r\n         tapKetLuan.push(ketQua);\r\n         LOG.push(`\\tTìm thấy kết quả: ${ketQua.split(':')[1]}`);\r\n      }\r\n      // if (tmp.length) {\r\n      // }\r\n   }\r\n}\r\nexport default { excute };\r\n","import React, { useState } from 'react';\r\nimport Select from 'react-select';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\nimport Algorithm from '../process';\r\nimport _ from 'lodash';\r\n\r\nexport default function FindPlaces({ selectData, rules }) {\r\n   const [selectedOption, setSelectedOption] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n   const [suggest, setSuggest] = useState(null);\r\n   const [log, setLog] = useState(null);\r\n   const [lastResult, setLastResult] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n   const handleOnClick = () => {\r\n      if (selectedOption === null) {\r\n         toast.error(`Please choose the events`);\r\n         return;\r\n      }\r\n\r\n      if (events === null) {\r\n         let data = selectedOption.map((item) => item.value);\r\n         setSelectedOption(null);\r\n         setEvents(data);\r\n         return;\r\n      } else {\r\n         toast.info('🔄 We are  finding the best place for you !!!', {\r\n            position: 'bottom-right',\r\n            autoClose: false,\r\n            hideProgressBar: false,\r\n            closeOnClick: false,\r\n            pauseOnHover: false,\r\n            draggable: false,\r\n            progress: undefined,\r\n         });\r\n         let { LOG, lastResult, suggests } = Algorithm.excute(events, rules);\r\n\r\n         toast.dismiss();\r\n         toast.success('🚀 Finding places succeed !!!');\r\n         setLog(LOG);\r\n         setLastResult(lastResult);\r\n         setSuggest(suggests);\r\n      }\r\n   };\r\n   const reset = () => {\r\n      setSelectedOption(null);\r\n      setEvents(null);\r\n      setLog(null);\r\n      setLastResult(null);\r\n      setSuggest(null);\r\n   };\r\n\r\n   return (\r\n      <div className='container'>\r\n         <div className='row justify-content-center pt-5 mt-5 '>\r\n            <Select\r\n               closeMenuOnSelect={events ? true : false}\r\n               value={selectedOption}\r\n               onChange={(e) => handleChange(e)}\r\n               isMulti={events ? false : true}\r\n               className='w-50'\r\n               options={selectData}\r\n               placeholder='Chọn sự kiện...'\r\n            />\r\n            <button type='button' className='btn btn-primary mx-1' onClick={() => handleOnClick()}>\r\n               {events ? 'Tìm địa điểm' : 'Thêm tập sự kiện'}\r\n            </button>\r\n            {events ? (\r\n               <button type='button' className='btn  btn-light mx-1' onClick={() => reset()}>\r\n                  Chọn lại\r\n               </button>\r\n            ) : null}\r\n         </div>\r\n         <div className='row justify-content-center mt-5 mb-3'>\r\n            {events && (\r\n               <div className='alert alert-success mt-5' role='alert'>\r\n                  {events.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele.split(': ')[1]}</b>\r\n                        {index !== events.length - 1 ? '  ^  ' : ' => '}\r\n                     </span>\r\n                  ))}\r\n                  {lastResult !== null && lastResult.length === 1 ? (\r\n                     <b>{lastResult[0]}</b>\r\n                  ) : lastResult !== null && lastResult.length > 1 ? (\r\n                     <b>{lastResult.map((item) => item.split(': ')[1]).join(' v ')}</b>\r\n                  ) : (\r\n                     <span className='badge badge-danger' style={{ fontSize: '1rem' }}>\r\n                        Không có kết quả\r\n                     </span>\r\n                  )}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className='row justify-content-center'>\r\n            {suggest && suggest.length && (\r\n               <div className='alert alert-info' role='alert'>\r\n                  <span className='badge badge-warning' style={{ fontSize: '1rem' }}>\r\n                     Gợi ý:\r\n                  </span>{' '}\r\n                  {suggest.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele}</b>\r\n                        {index !== suggest.length - 1 ? '    v    ' : null}\r\n                     </span>\r\n                  ))}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className='row mt-5 pb-5 justify-content-between'>\r\n            {log ? (\r\n               <table className='table table-bordered table-hover bg-white col-12'>\r\n                  <thead className='thead-dark'>\r\n                     <tr>\r\n                        <th scope='col'>Quá trình thực hiện thuật toán</th>\r\n                     </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                     {log.map((item, index) => (\r\n                        <tr key={index}>\r\n                           <td\r\n                              className={\r\n                                 item.includes('Lần duyệt thứ') ||\r\n                                 item.includes('=> Xét luật') ||\r\n                                 item.includes('Xét riêng') ||\r\n                                 item.includes('Xét toàn') ||\r\n                                 item.includes('Lọc các kết quả ngoại lệ') ||\r\n                                 item.includes('Chọn ra các kết quả trùng lặp')\r\n                                    ? 'text-left font-weight-bold'\r\n                                    : item.includes('Tìm thấy')\r\n                                    ? 'alert-success pl-5 text-left'\r\n                                    : item.includes('Không tìm')\r\n                                    ? 'alert-danger pl-5 text-left'\r\n                                    : item.includes('lọc trùng')\r\n                                    ? 'alert-secondary pl-5 text-left'\r\n                                    : item.includes('Kết quả cuối cùng')\r\n                                    ? 'alert-warning pl-5 text-left'\r\n                                    : item.includes('Kết thúc thuật toán')\r\n                                    ? 'alert-dark text-left'\r\n                                    : item.includes('Phát hiện sự kiện')\r\n                                    ? 'alert-info text-left'\r\n                                    : 'text-left'\r\n                              }\r\n                              scope='row'>\r\n                              {item}\r\n                           </td>\r\n                        </tr>\r\n                     ))}\r\n                  </tbody>\r\n               </table>\r\n            ) : null}\r\n         </div>\r\n      </div>\r\n   );\r\n}\r\n","import Manu from './components/Menu';\nimport CreateRules from './components/CreateRules';\nimport Events from './components/Events';\nimport Rules from './components/Rules';\nimport ManageEvents from './components/ManageEvents';\nimport FindPlaces from './components/FindPlaces';\nimport { useState, useEffect } from 'react';\nimport * as api from './apis';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { PageType } from './config/PageType';\n\nfunction App() {\n   const [selectData, setSelectData] = useState([]);\n   const [rules, setRules] = useState([]);\n   const [page, setPage] = useState(PageType.CREATE_RULES);\n\n   const getAllRules = async () => {\n      const res = await api.getAllRules();\n      let data = [...res.data.data];\n\n      data.forEach((element) => {\n         element.events.sort();\n      });\n      data.sort((a, b) => {\n         return a.events[0]\n            .split(':')[0]\n            .localeCompare(b.events[0].split(':')[0]);\n      });\n      data.sort((a, b) => {\n         return a.events.length - b.events.length;\n      });\n      res.data.data = data;\n      return res.data;\n   };\n\n   useEffect(() => {\n      toast.info('🔄 Loading data !!!', {\n         position: 'bottom-right',\n         autoClose: false,\n         hideProgressBar: false,\n         closeOnClick: false,\n         pauseOnHover: false,\n         draggable: false,\n         progress: undefined,\n      });\n      const getData = async () => {\n         const res = await api.getGroupEvents();\n         const res1 = await getAllRules();\n         if (res.data.code === 1 && res1.code === 1) {\n            setSelectData(res.data.data);\n            setRules(res1.data);\n\n            toast.dismiss();\n            toast.success('🚀 Loading select succeed !!!');\n         } else {\n            toast.error('🔥 Loading data failed !!!');\n         }\n      };\n\n      getData();\n   }, []);\n\n   const loadAllRule = async () => {\n      const res = await getAllRules();\n\n      if (res.code === 1) {\n         setRules(res.data);\n\n         toast.dismiss();\n         toast.success('🚀 Reloading all rule succeed !!!');\n      } else {\n         toast.error('🔥 Reloading all rule failed !!!');\n      }\n   };\n\n   const getAllEvents = async () => {\n      let res = null;\n      try {\n         res = await api.getAllEvents();\n         if (res.data.code !== 1) {\n            toast.error('🔥 Loading all events failed !!!');\n            return;\n         }\n      } catch (e) {\n         toast.error('🔥 Loading all events failed !!!');\n      }\n\n      return res.data.data.map((item) => `${item}\\n`);\n   };\n\n   const convertResults = () => {\n      return rules.map((item, index) => {\n         let REULTS = item.result.split(':')[0];\n         let string = '';\n         for (let i = 0; i < item.events.length; i++) {\n            string += item.events[i].split(':')[0];\n\n            let tmp = ' ^ ';\n            if (i === item.events.length - 1) tmp = ' => ';\n\n            string += tmp;\n         }\n\n         return `R${index + 1}: ${string}${REULTS}\\n`;\n      });\n   };\n\n   const renderPage = () => {\n      switch (page) {\n         case PageType.FIND_PLACES:\n            return (\n               <FindPlaces\n                  selectData={selectData}\n                  loadAllRule={loadAllRule}\n                  rules={rules}\n               >\n                  {rules.length !== 0 ? <Rules rules={rules} /> : null}\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </FindPlaces>\n            );\n         case PageType.MANAGE_EVENTS:\n            return (\n               <ManageEvents\n                  selectData={selectData}\n                  loadAllRule={loadAllRule}\n                  rules={rules}\n               >\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </ManageEvents>\n            );\n         default:\n            return (\n               <CreateRules selectData={selectData} loadAllRule={loadAllRule}>\n                  {rules.length !== 0 ? <Rules rules={rules} /> : null}\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </CreateRules>\n            );\n      }\n   };\n   return (\n      <>\n         <Manu\n            rules={convertResults}\n            getAllEvents={getAllEvents}\n            setPage={setPage}\n         />\n         {renderPage()}\n         <ToastContainer\n            position=\"bottom-right\"\n            autoClose={5000}\n            hideProgressBar={false}\n            newestOnTop={false}\n            rlt={false}\n            pauseOnHover\n            pauseOnFocusLoss\n            closeOnClick\n            draggable\n         />\n      </>\n   );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './styles/styles.scss';\nReactDOM.render(\n   <React.StrictMode>\n      <App />\n   </React.StrictMode>,\n   document.getElementById('root')\n);\n"],"sourceRoot":""}