{"version":3,"sources":["config/PageType.js","components/Menu.js","apis/index.js","components/CreateRules.js","components/Events.js","components/Rules.js","components/ManageEvents.js","process/index.js","components/FindPlaces.js","App.js","index.js"],"names":["PageType","Menu","getAllEvents","rules","setPage","NavItem","props","useState","open","setOpen","className","href","onClick","icon","children","DropdownMenu","menuHeight","setMenuHeight","dropdownRef","useRef","useEffect","current","firstChild","offsetHeight","DropdownItem","e","testOnClick","leftIcon","rightIcon","style","height","zIndex","ref","goToMenu","createFile","fileText","name","element","document","createElement","file","Blob","type","URL","createObjectURL","download","body","appendChild","click","a","target","innerText","includes","createNewRule","data","axios","post","CreateRules","selectData","loadAllRule","selectedOption","setSelectedOption","events","setEvents","result","setResult","reset","handleSave","sendResult","value","sendData","toast","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","api","res","code","dismiss","success","warning","message","error","closeMenuOnSelect","onChange","handleChange","isMulti","options","placeholder","isDisabled","length","map","item","handleOnClick","role","ele","index","Events","handleDelete","scope","rowSpan","label","Rules","cursor","join","id","setOptions","defaultValue","aria-label","aria-describedby","console","log","KET_LUAN","SU_KIEN_NGOAI_LE","suKienNgoaiLe","kqNgoaiLe","LOG","ketQuaTungSuKien","lastResult","getDuplicateValue","arr","dict","reduce","b","Object","keys","filter","ketQuaToanBo","suKienGiaThiet","tapLuatBanDau","maTapLuatBanDau","MA_TAP_LUAT","khoiTaoTapLuatBanDau","tapLuatThoa","i","flag","tapKetLuan","push","timLuatThoa","xetLuatDauTien","maLuatThoa","forEach","maLuat","every","taoLogLuatThoa","tmp","_","differenceWith","isEqual","string","formatLuat","shift","tmpLuat","kiemTraKetQua","luat","REULTS","split","ketQua","charAt","isEmpty","xetToanBoSuKien","unshift","event","indexOf","xetTungSuKien","eachEvents","ketQuaTrungLap","tatCaCacKQ","Set","suggests","FindPlaces","suggest","setSuggest","setLog","setLastResult","Algorithm","fontSize","App","setSelectData","setRules","page","getAllRules","get","sort","localeCompare","res1","getData","renderPage","newestOnTop","rlt","pauseOnFocusLoss","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f56bf80f.chunk.js","sourcesContent":["export const PageType = {\r\n   CREATE_RULES: 'CreateRules',\r\n   FIND_PLACES: 'FindPlaces',\r\n   MANAGE_EVENTS: 'ManageEvents',\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport '../styles/menu.scss';\r\nimport { toast } from 'react-toastify';\r\nimport { PageType } from '../config/PageType';\r\n\r\nexport default function Menu({ getAllEvents, rules, setPage }) {\r\n   const NavItem = (props) => {\r\n      const [open, setOpen] = useState(false);\r\n\r\n      return (\r\n         <li className=\"menu-button\">\r\n            <div\r\n               href=\"#\"\r\n               className=\"icon-button\"\r\n               onClick={() => setOpen(!open)}\r\n            >\r\n               {props.icon}\r\n            </div>\r\n\r\n            {open && props.children}\r\n         </li>\r\n      );\r\n   };\r\n\r\n   const DropdownMenu = () => {\r\n      const [menuHeight, setMenuHeight] = useState(null);\r\n      const dropdownRef = useRef(null);\r\n      useEffect(() => {\r\n         setMenuHeight(dropdownRef.current?.firstChild.offsetHeight);\r\n      }, []);\r\n      const DropdownItem = (props) => {\r\n         return (\r\n            <div href=\"#\" className=\"menu-item\" onClick={(e) => testOnClick(e)}>\r\n               <span className=\"icon-button\">{props.leftIcon}</span>\r\n               {props.children}\r\n               <span className=\"icon-right\">{props.rightIcon}</span>\r\n            </div>\r\n         );\r\n      };\r\n\r\n      return (\r\n         <div\r\n            className=\"dropdown\"\r\n            style={{ height: menuHeight, zIndex: '1' }}\r\n            ref={dropdownRef}\r\n         >\r\n            <div className=\"menu\">\r\n               <DropdownItem\r\n                  goToMenu=\"main\"\r\n                  leftIcon=\"📝\"\r\n                  onClick={testOnClick}\r\n               >\r\n                  Tạo tập luật\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon=\"🗃️\" onClick={testOnClick}>\r\n                  Quản sự kiện\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon=\"🗺\" onClick={testOnClick}>\r\n                  Tìm địa điểm\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon=\"📥\" onClick={testOnClick}>\r\n                  Tải tập luật\r\n               </DropdownItem>\r\n            </div>\r\n         </div>\r\n      );\r\n   };\r\n\r\n   const createFile = (fileText, name) => {\r\n      const element = document.createElement('a');\r\n      const file = new Blob(fileText, {\r\n         type: 'text/plain',\r\n      });\r\n      element.href = URL.createObjectURL(file);\r\n      element.download = name;\r\n      document.body.appendChild(element); // Required for this to work in FireFox\r\n      element.click();\r\n   };\r\n\r\n   const testOnClick = async (e) => {\r\n      if (e.target.innerText.includes('Tải tập luật')) {\r\n         createFile(rules(), 'Rules.txt');\r\n         createFile(await getAllEvents(), 'Events.txt');\r\n      }\r\n\r\n      if (e.target.innerText.includes('Tìm địa điểm')) {\r\n         setPage(PageType.FIND_PLACES);\r\n      }\r\n\r\n      if (e.target.innerText.includes('Quản sự kiện')) {\r\n         setPage(PageType.MANAGE_EVENTS);\r\n      }\r\n\r\n      if (e.target.innerText.includes('Tạo tập luật')) {\r\n         setPage(PageType.CREATE_RULES);\r\n      }\r\n   };\r\n   return (\r\n      <NavItem icon={<i className=\"fas fa-bars\"></i>}>\r\n         <DropdownMenu></DropdownMenu>\r\n      </NavItem>\r\n   );\r\n}\r\n","import axios from 'axios';\r\n\r\nexport const getGroupEvents = () =>\r\n   axios.get('api/spreadsheets/get-group-events');\r\n\r\nexport const getAllEvents = () => axios.get('api/spreadsheets/get-all-events');\r\n\r\nexport const getAllRules = () => axios.get('api/spreadsheets/get-all-rules');\r\n\r\nexport const createNewRule = (data) => axios.post('api/create-new-rule', data);\r\n","import React, { useState } from 'react';\r\nimport Select from 'react-select';\r\nimport * as api from '../apis';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\n\r\nexport default function CreateRules({ selectData, children, loadAllRule }) {\r\n   const [selectedOption, setSelectedOption] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n   const [result, setResult] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n   const handleOnClick = () => {\r\n      if (selectedOption && events === null) {\r\n         let data = selectedOption.map((item) => item.value);\r\n         setSelectedOption(null);\r\n         setEvents(data);\r\n         return;\r\n      }\r\n\r\n      if (result === null) {\r\n         setResult(selectedOption);\r\n         setSelectedOption(null);\r\n\r\n         return;\r\n      }\r\n   };\r\n   const reset = () => {\r\n      setEvents(null);\r\n      setResult(null);\r\n   };\r\n   const handleSave = async () => {\r\n      const sendResult = result.value;\r\n      let sendData = {\r\n         result: sendResult,\r\n         events,\r\n      };\r\n      toast.info('🔄 Creating rule !!!', {\r\n         position: 'bottom-right',\r\n         autoClose: false,\r\n         hideProgressBar: false,\r\n         closeOnClick: false,\r\n         pauseOnHover: false,\r\n         draggable: false,\r\n         progress: undefined,\r\n      });\r\n      const res = await api.createNewRule(sendData);\r\n      if (res.data.code === 1) {\r\n         toast.dismiss();\r\n         toast.success('🚀 Creating rule succeed !!!');\r\n         reset();\r\n         loadAllRule();\r\n      } else if (res.data.code === 2) {\r\n         toast.dismiss();\r\n         toast.warning(`📑 ${res.data.message}`);\r\n      } else {\r\n         toast.dismiss();\r\n         toast.error('🔥 Creating rule failed !!!');\r\n      }\r\n   };\r\n   return (\r\n      <div className=\"container\">\r\n         <div className=\"row justify-content-center pt-5 mt-5 \">\r\n            <Select\r\n               closeMenuOnSelect={events ? true : false}\r\n               value={selectedOption}\r\n               onChange={(e) => handleChange(e)}\r\n               isMulti={events ? false : true}\r\n               className=\"w-50\"\r\n               options={selectData}\r\n               placeholder=\"Chọn sự kiện...\"\r\n               isDisabled={selectData.length ? false : true}\r\n            />\r\n            {result ? null : (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-primary mx-1\"\r\n                  onClick={() => handleOnClick()}\r\n               >\r\n                  {events ? 'Chọn kết quả' : 'Chọn tập sự kiện'}\r\n               </button>\r\n            )}\r\n            {!result ? null : (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-warning mx-1\"\r\n                  onClick={() => handleSave()}\r\n               >\r\n                  Lưu\r\n               </button>\r\n            )}\r\n            {events ? (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn  btn-light mx-1\"\r\n                  onClick={() => reset()}\r\n               >\r\n                  Chọn lại\r\n               </button>\r\n            ) : null}\r\n         </div>\r\n         <div className=\"row justify-content-center mt-5\">\r\n            {events && (\r\n               <div className=\"alert alert-success mt-5\" role=\"alert\">\r\n                  {events.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele}</b>\r\n                        {index !== events.length - 1 ? '  ^  ' : '  =>'}\r\n                     </span>\r\n                  ))}\r\n                  {result != null ? <b>{result.value}</b> : null}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className=\"row mt-5 pb-5 justify-content-between\">{children}</div>\r\n      </div>\r\n   );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Events({ events, handleDelete = null }) {\r\n   return (\r\n      <>\r\n         <table className=\"table table-bordered table-hover col-12 bg-white\">\r\n            <thead className=\"thead-dark\">\r\n               <tr>\r\n                  <th scope=\"col\">Loại sự kiện</th>\r\n                  <th scope=\"col\">Sự Kiện</th>\r\n               </tr>\r\n            </thead>\r\n            <tbody>\r\n               {events.map((item) =>\r\n                  item.options.map((ele, index) => (\r\n                     <tr key={index}>\r\n                        {index === 0 ? (\r\n                           <th\r\n                              className=\"font-weight-bold align-middle text-center\"\r\n                              scope=\"row\"\r\n                              rowSpan={item.options.length}\r\n                           >\r\n                              {`${item.value}: ${item.label}`}\r\n                           </th>\r\n                        ) : null}\r\n                        <td className=\"d-flex justify-content-between align-items-center\">\r\n                           {ele.value}{' '}\r\n                           {/* {handleDelete !== null ? (\r\n                              <button className=\"btn btn-danger\">Xóa</button>\r\n                           ) : null} */}\r\n                        </td>\r\n                     </tr>\r\n                  ))\r\n               )}\r\n            </tbody>\r\n         </table>\r\n      </>\r\n   );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Rules({ rules }) {\r\n   return (\r\n      <>\r\n         <table className=\"table table-bordered table-hover bg-white col-12\">\r\n            <thead className=\"thead-dark\">\r\n               <tr>\r\n                  <th scope=\"col\">Sự kiện</th>\r\n                  <th scope=\"col\">Kết quả</th>\r\n               </tr>\r\n            </thead>\r\n            <tbody>\r\n               {rules.map((item) => (\r\n                  <tr key={item.id} style={{ cursor: 'pointer' }}>\r\n                     <td\r\n                        className=\"text-center vertical-align-middle font-weight-bold\"\r\n                        scope=\"row\"\r\n                     >\r\n                        {item.events.join(' ^ ')}\r\n                     </td>\r\n\r\n                     <td className=\"d-flex justify-content-between align-items-center\">\r\n                        <b>{item.result}</b>\r\n                        {/* <button className=\"btn btn-danger\">Xóa</button> */}\r\n                     </td>\r\n                  </tr>\r\n               ))}\r\n            </tbody>\r\n         </table>\r\n      </>\r\n   );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Select from 'react-select';\r\nimport * as api from '../apis';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\n\r\nexport default function CreateRules({ selectData, children, loadAllRule }) {\r\n   const [selectedOption, setSelectedOption] = useState([]);\r\n   const [options, setOptions] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n\r\n   const handleInputOnChange = (e) => {\r\n      console.log(e.target.value);\r\n   };\r\n\r\n   useEffect(() => {\r\n      let data = selectData.map((item) => ({\r\n         value: item.value,\r\n         label: item.label,\r\n      }));\r\n      setOptions(data);\r\n   }, [selectData]);\r\n\r\n   const handleOnClick = () => {\r\n      if (!selectedOption || !events) {\r\n         toast.error(`You have to choose Events Type and events`);\r\n         return;\r\n      }\r\n   };\r\n   const reset = () => {\r\n      setEvents(null);\r\n   };\r\n   const handleSave = async () => {\r\n      const sendResult = events.value;\r\n      let sendData = {\r\n         result: sendResult,\r\n         events,\r\n      };\r\n      toast.info('🔄 Creating rule !!!', {\r\n         position: 'bottom-right',\r\n         autoClose: false,\r\n         hideProgressBar: false,\r\n         closeOnClick: false,\r\n         pauseOnHover: false,\r\n         draggable: false,\r\n         progress: undefined,\r\n      });\r\n      const res = await api.createNewRule(sendData);\r\n      if (res.data.code === 1) {\r\n         toast.dismiss();\r\n         toast.success('🚀 Creating rule succeed !!!');\r\n         reset();\r\n         loadAllRule();\r\n      } else if (res.data.code === 2) {\r\n         toast.dismiss();\r\n         toast.warning(`📑 ${res.data.message}`);\r\n      } else {\r\n         toast.dismiss();\r\n         toast.error('🔥 Creating rule failed !!!');\r\n      }\r\n   };\r\n   return (\r\n      <div className=\"container\">\r\n         <div className=\"row justify-content-center pt-5 mt-5 \">\r\n            {options !== null ? (\r\n               <Select\r\n                  defaultValue={selectedOption[0]}\r\n                  value={selectedOption}\r\n                  onChange={(e) => handleChange(e)}\r\n                  className=\"col-3\"\r\n                  options={options}\r\n                  placeholder=\"Chọn sự kiện...\"\r\n                  isDisabled={selectData.length ? false : true}\r\n               />\r\n            ) : null}\r\n\r\n            <input\r\n               type=\"text\"\r\n               className=\"form-control col-5\"\r\n               placeholder=\"Nhập sự kiện ...\"\r\n               aria-label=\"Nhập sự kiện\"\r\n               aria-describedby=\"basic-addon2\"\r\n               onChange={handleInputOnChange}\r\n            />\r\n\r\n            <button\r\n               type=\"button\"\r\n               className=\"btn btn-primary mx-1\"\r\n               onClick={() => handleOnClick()}\r\n            >\r\n               Thêm sự Kiện\r\n            </button>\r\n         </div>\r\n\r\n         <div className=\"row mt-5 pb-5 justify-content-between\">{children}</div>\r\n      </div>\r\n   );\r\n}\r\n","import _ from 'lodash';\r\n\r\n//Khai báo một số hằng\r\nconst KET_LUAN = ['H', 'A'];\r\nconst SU_KIEN_NGOAI_LE = ['C5', 'C3', 'G1', 'G2'];\r\n\r\n//Khai báo 1 số biến toàn cục\r\nvar suKienNgoaiLe = [];\r\nvar kqNgoaiLe = [];\r\nvar LOG = [];\r\nvar ketQuaTungSuKien = [];\r\nvar lastResult = [];\r\n\r\nconst excute = (events, rules) => {\r\n   //Reset biến toàn cục\r\n   LOG = [];\r\n   ketQuaTungSuKien = [];\r\n   kqNgoaiLe = [];\r\n   suKienNgoaiLe = [];\r\n   lastResult = [];\r\n\r\n   // Xét thuật toán suy diễn tiến với toàn bộ sự kiện\r\n   let ketQuaToanBo = xetToanBoSuKien(events, rules);\r\n\r\n   if (events.length > 1) LOG.unshift('====Xét toàn bộ sự kiện====');\r\n\r\n   //Xét riêng lẻ từng sự kiện\r\n   eachEvents(events, rules);\r\n\r\n   LOG.push('Chọn ra các kết quả trùng lặp');\r\n   let ketQuaTrungLap = getDuplicateValue(ketQuaTungSuKien);\r\n\r\n   let tatCaCacKQ = [...ketQuaToanBo, ...ketQuaTrungLap];\r\n   if (suKienNgoaiLe.length) {\r\n      LOG.push('Lọc các kết quả ngoại lệ');\r\n\r\n      /* Nếu có sự kiện ngoại lệ mà các sự kiện đó không\r\n       có kết quả trùng thì kết quả cuối cùng cũng không có*/\r\n      if (kqNgoaiLe.length == 0) {\r\n         lastResult = [];\r\n      } else {\r\n         lastResult = getDuplicateValue([...tatCaCacKQ, ...kqNgoaiLe]);\r\n      }\r\n   } else {\r\n      lastResult = [...new Set(tatCaCacKQ)];\r\n   }\r\n\r\n   let suggests = _.differenceWith(tatCaCacKQ, lastResult, _.isEqual).map(\r\n      (item) => item.split(': ')[1]\r\n   );\r\n   LOG.push(\r\n      `==> Kết quả cuối cùng: ${\r\n         lastResult.length > 1\r\n            ? lastResult.map((item) => item.split(': ')[1]).join(' v ')\r\n            : lastResult.length == 1\r\n            ? lastResult[0]\r\n            : 'Không tìm thấy kết quả'\r\n      }`\r\n   );\r\n\r\n   LOG.push('Kết thúc thuật toán');\r\n\r\n   return { LOG, lastResult, suggests };\r\n};\r\n\r\nfunction eachEvents(events, rules) {\r\n   events.forEach((item) => {\r\n      if (events.length > 1) LOG.push(`====Xét riêng sự kiện ${item}====`);\r\n      xetTungSuKien(item, rules);\r\n   });\r\n}\r\n\r\nfunction getDuplicateValue(arr) {\r\n   const count = (names) =>\r\n      names.reduce((a, b) => ({ ...a, [b]: (a[b] || 0) + 1 }), {});\r\n\r\n   const duplicates = (dict) => Object.keys(dict).filter((a) => dict[a] > 1);\r\n\r\n   //Trả lại mảng các phần từ trùng nhau\r\n   return duplicates(count(arr));\r\n}\r\n\r\nfunction khoiTaoTapLuatBanDau(rules) {\r\n   let arr = [...rules];\r\n   let tapLuatBanDau = {},\r\n      maTapLuatBanDau = [];\r\n   maTapLuatBanDau = arr.map((item) => {\r\n      let MA_TAP_LUAT = item.id;\r\n      tapLuatBanDau[MA_TAP_LUAT] = item;\r\n\r\n      return MA_TAP_LUAT;\r\n   });\r\n\r\n   return { tapLuatBanDau, maTapLuatBanDau };\r\n}\r\n\r\nfunction xetTungSuKien(event, rules) {\r\n   let data = [];\r\n   let flag = false;\r\n   if (SU_KIEN_NGOAI_LE.indexOf(event.split(': ')[0]) !== -1) {\r\n      LOG.push('Phát hiện sự kiện ngoại lệ');\r\n      suKienNgoaiLe.push(event);\r\n   }\r\n\r\n   if (suKienNgoaiLe.length > 1) flag = true;\r\n\r\n   rules.filter((item) => {\r\n      if (item.events.includes(event) && !data.includes(item.result)) {\r\n         data.push(item.result);\r\n         if (SU_KIEN_NGOAI_LE.indexOf(event.split(': ')[0]) !== -1)\r\n            kqNgoaiLe.push(item.result);\r\n         LOG.push(`Tìm thấy kết quả: ${item.result.split(':')[1]}`);\r\n      }\r\n   });\r\n\r\n   if (flag) {\r\n      let tmp = getDuplicateValue(kqNgoaiLe);\r\n      kqNgoaiLe = tmp;\r\n   }\r\n\r\n   ketQuaTungSuKien = [...ketQuaTungSuKien, ...data];\r\n}\r\n\r\nfunction xetToanBoSuKien(events, rules) {\r\n   let suKienGiaThiet = [...events];\r\n   let { tapLuatBanDau, maTapLuatBanDau } = khoiTaoTapLuatBanDau(rules);\r\n   let tapLuatThoa = [];\r\n   let i = 1;\r\n   let flag = true;\r\n   let tapKetLuan = [];\r\n\r\n   // Chạy thuật toán\r\n   while (flag) {\r\n      LOG.push(`Lần duyệt thứ ${i}, các luật thỏa: `);\r\n      //Tìm các luật thỏa SAT\r\n      timLuatThoa({ events, maTapLuatBanDau });\r\n      if (!tapLuatThoa.length) {\r\n         LOG.push('Không tìm được kết quả');\r\n         break;\r\n      }\r\n      //Xét luật thỏa đầu tiên trong mảng\r\n      xetLuatDauTien();\r\n      i++;\r\n      if (!tapKetLuan.length && !tapLuatThoa.length) {\r\n         LOG.push('Không tìm được kết quả');\r\n         break;\r\n      }\r\n\r\n      if (!tapLuatThoa.length) {\r\n         flag = false;\r\n      }\r\n   }\r\n\r\n   return tapKetLuan;\r\n\r\n   function timLuatThoa() {\r\n      let maLuatThoa = [];\r\n\r\n      // Lặp tất cả để tìm các luật thỏa\r\n      maTapLuatBanDau.forEach((maLuat) => {\r\n         if (\r\n            tapLuatBanDau[maLuat].events.every((e) =>\r\n               suKienGiaThiet.includes(e)\r\n            )\r\n         ) {\r\n            maLuatThoa.push(maLuat);\r\n            tapLuatThoa.push(maLuat);\r\n            taoLogLuatThoa(maLuat);\r\n         }\r\n      });\r\n\r\n      if (!maLuatThoa.length) LOG.push(`Không tìm thấy luật thỏa`);\r\n\r\n      //Xóa luật thỏa khỏi mảng tất cả các luật\r\n      let tmp = _.differenceWith(maTapLuatBanDau, maLuatThoa, _.isEqual);\r\n      maTapLuatBanDau = tmp;\r\n   }\r\n\r\n   function taoLogLuatThoa(maLuat) {\r\n      let tmpLuat = tapLuatBanDau[maLuat];\r\n\r\n      let string = formatLuat(tmpLuat);\r\n\r\n      LOG.push(`Tìm thấy luật thỏa: ${string}`);\r\n   }\r\n\r\n   function xetLuatDauTien() {\r\n      //Lấy mã của luật đầu tiên\r\n      let maLuat = tapLuatThoa[0];\r\n\r\n      //Xóa luật đầu tiên ra khỏi mảng\r\n      tapLuatThoa.shift();\r\n      let tmpLuat = tapLuatBanDau[maLuat];\r\n      // let cacSuKienMoi = [...tmpLuat.events, tmpLuat.result];\r\n      // //Thêm các sự kiện vào tập luật giả thiết\r\n      // let tmpArr = new Set([...suKienGiaThiet, ...cacSuKienMoi]);\r\n      suKienGiaThiet.push(tmpLuat.result);\r\n\r\n      let string = formatLuat(tmpLuat);\r\n      LOG.push(`=> Xét luật ${string}`);\r\n      // LOG.push(`\\t&#09;=> Tìm thấy kết quả ${string}`);\r\n      //Kiểm tra kết quả đã có trong mệnh đề hay không\r\n      kiemTraKetQua(tmpLuat.result);\r\n   }\r\n\r\n   function formatLuat(luat) {\r\n      let REULTS = luat.result.split(':')[1];\r\n      let string = '';\r\n      for (let i = 0; i < luat.events.length; i++) {\r\n         string += luat.events[i].split(':')[1];\r\n\r\n         let tmp = ' ^ ';\r\n         if (i == luat.events.length - 1) tmp = ' => ';\r\n\r\n         string += tmp;\r\n      }\r\n      return `R${luat.id}: ${string}${REULTS}`;\r\n   }\r\n\r\n   function kiemTraKetQua(ketQua) {\r\n      if (\r\n         _([`${ketQua.charAt(0)}`])\r\n            .differenceWith(KET_LUAN, _.isEqual)\r\n            .isEmpty() &&\r\n         !tapKetLuan.includes(ketQua)\r\n      ) {\r\n         tapKetLuan.push(ketQua);\r\n         LOG.push(`\\tTìm thấy kết quả: ${ketQua.split(':')[1]}`);\r\n      }\r\n      // if (tmp.length) {\r\n      // }\r\n   }\r\n}\r\nexport default { excute };\r\n","import React, { useState } from 'react';\r\nimport Select from 'react-select';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\nimport Algorithm from '../process';\r\nimport _ from 'lodash';\r\n\r\nexport default function FindPlaces({ selectData, rules }) {\r\n   const [selectedOption, setSelectedOption] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n   const [suggest, setSuggest] = useState(null);\r\n   const [log, setLog] = useState(null);\r\n   const [lastResult, setLastResult] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n   const handleOnClick = () => {\r\n      if (events === null) {\r\n         let data = selectedOption.map((item) => item.value);\r\n         setSelectedOption(null);\r\n         setEvents(data);\r\n         return;\r\n      } else {\r\n         toast.info('🔄 We are  finding the best place for you !!!', {\r\n            position: 'bottom-right',\r\n            autoClose: false,\r\n            hideProgressBar: false,\r\n            closeOnClick: false,\r\n            pauseOnHover: false,\r\n            draggable: false,\r\n            progress: undefined,\r\n         });\r\n         let { LOG, lastResult, suggests } = Algorithm.excute(events, rules);\r\n\r\n         toast.dismiss();\r\n         toast.success('🚀 Finding places succeed !!!');\r\n         setLog(LOG);\r\n         setLastResult(lastResult);\r\n         setSuggest(suggests);\r\n      }\r\n   };\r\n   const reset = () => {\r\n      setSelectedOption(null);\r\n      setEvents(null);\r\n      setLog(null);\r\n      setLastResult(null);\r\n      setSuggest(null);\r\n   };\r\n\r\n   return (\r\n      <div className=\"container\">\r\n         <div className=\"row justify-content-center pt-5 mt-5 \">\r\n            <Select\r\n               closeMenuOnSelect={events ? true : false}\r\n               value={selectedOption}\r\n               onChange={(e) => handleChange(e)}\r\n               isMulti={events ? false : true}\r\n               className=\"w-50\"\r\n               options={selectData}\r\n               placeholder=\"Chọn sự kiện...\"\r\n            />\r\n            <button\r\n               type=\"button\"\r\n               className=\"btn btn-primary mx-1\"\r\n               onClick={() => handleOnClick()}\r\n            >\r\n               {events ? 'Tìm địa điểm' : 'Thêm tập sự kiện'}\r\n            </button>\r\n            {events ? (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn  btn-light mx-1\"\r\n                  onClick={() => reset()}\r\n               >\r\n                  Chọn lại\r\n               </button>\r\n            ) : null}\r\n         </div>\r\n         <div className=\"row justify-content-center mt-5 mb-3\">\r\n            {events && (\r\n               <div className=\"alert alert-success mt-5\" role=\"alert\">\r\n                  {events.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele.split(': ')[1]}</b>\r\n                        {index !== events.length - 1 ? '  ^  ' : ' => '}\r\n                     </span>\r\n                  ))}\r\n                  {lastResult !== null && lastResult.length === 1 ? (\r\n                     <b>{lastResult[0]}</b>\r\n                  ) : lastResult !== null && lastResult.length > 1 ? (\r\n                     <b>\r\n                        {lastResult\r\n                           .map((item) => item.split(': ')[1])\r\n                           .join(' v ')}\r\n                     </b>\r\n                  ) : (\r\n                     <span\r\n                        className=\"badge badge-danger\"\r\n                        style={{ fontSize: '1rem' }}\r\n                     >\r\n                        Không có kết quả\r\n                     </span>\r\n                  )}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className=\"row justify-content-center\">\r\n            {suggest && suggest.length && (\r\n               <div className=\"alert alert-info\" role=\"alert\">\r\n                  <span\r\n                     className=\"badge badge-warning\"\r\n                     style={{ fontSize: '1rem' }}\r\n                  >\r\n                     Gợi ý:\r\n                  </span>{' '}\r\n                  {suggest.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele}</b>\r\n                        {index !== suggest.length - 1 ? '    v    ' : null}\r\n                     </span>\r\n                  ))}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className=\"row mt-5 pb-5 justify-content-between\">\r\n            {log ? (\r\n               <table className=\"table table-bordered table-hover bg-white col-12\">\r\n                  <thead className=\"thead-dark\">\r\n                     <tr>\r\n                        <th scope=\"col\">Quá trình thực hiện thuật toán</th>\r\n                     </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                     {log.map((item, index) => (\r\n                        <tr key={index}>\r\n                           <td\r\n                              className={\r\n                                 item.includes('Lần duyệt thứ') ||\r\n                                 item.includes('=> Xét luật') ||\r\n                                 item.includes('Xét riêng') ||\r\n                                 item.includes('Xét toàn') ||\r\n                                 item.includes('Lọc các kết quả ngoại lệ') ||\r\n                                 item.includes('Chọn ra các kết quả trùng lặp')\r\n                                    ? 'text-left font-weight-bold'\r\n                                    : item.includes('Tìm thấy')\r\n                                    ? 'alert-success pl-5 text-left'\r\n                                    : item.includes('Không tìm')\r\n                                    ? 'alert-danger pl-5 text-left'\r\n                                    : item.includes('lọc trùng')\r\n                                    ? 'alert-secondary pl-5 text-left'\r\n                                    : item.includes('Kết quả cuối cùng')\r\n                                    ? 'alert-warning pl-5 text-left'\r\n                                    : item.includes('Kết thúc thuật toán')\r\n                                    ? 'alert-dark text-left'\r\n                                    : item.includes('Phát hiện sự kiện')\r\n                                    ? 'alert-info text-left'\r\n                                    : 'text-left'\r\n                              }\r\n                              scope=\"row\"\r\n                           >\r\n                              {item}\r\n                           </td>\r\n                        </tr>\r\n                     ))}\r\n                  </tbody>\r\n               </table>\r\n            ) : null}\r\n         </div>\r\n      </div>\r\n   );\r\n}\r\n","import Manu from './components/Menu';\nimport CreateRules from './components/CreateRules';\nimport Events from './components/Events';\nimport Rules from './components/Rules';\nimport ManageEvents from './components/ManageEvents';\nimport FindPlaces from './components/FindPlaces';\nimport { useState, useEffect } from 'react';\nimport * as api from './apis';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { PageType } from './config/PageType';\n\nfunction App() {\n   const [selectData, setSelectData] = useState([]);\n   const [rules, setRules] = useState([]);\n   const [page, setPage] = useState(PageType.CREATE_RULES);\n\n   const getAllRules = async () => {\n      const res = await api.getAllRules();\n      let data = [...res.data.data];\n\n      data.forEach((element) => {\n         element.events.sort();\n      });\n      data.sort((a, b) => {\n         return a.events[0]\n            .split(':')[0]\n            .localeCompare(b.events[0].split(':')[0]);\n      });\n      data.sort((a, b) => {\n         return a.events.length - b.events.length;\n      });\n      res.data.data = data;\n      return res.data;\n   };\n\n   useEffect(() => {\n      toast.info('🔄 Loading data !!!', {\n         position: 'bottom-right',\n         autoClose: false,\n         hideProgressBar: false,\n         closeOnClick: false,\n         pauseOnHover: false,\n         draggable: false,\n         progress: undefined,\n      });\n      const getData = async () => {\n         const res = await api.getGroupEvents();\n         const res1 = await getAllRules();\n         if (res.data.code === 1 && res1.code === 1) {\n            setSelectData(res.data.data);\n            setRules(res1.data);\n\n            toast.dismiss();\n            toast.success('🚀 Loading select succeed !!!');\n         } else {\n            toast.error('🔥 Loading data failed !!!');\n         }\n      };\n\n      getData();\n   }, []);\n\n   const loadAllRule = async () => {\n      const res = await getAllRules();\n\n      if (res.code === 1) {\n         setRules(res.data);\n\n         toast.dismiss();\n         toast.success('🚀 Reloading all rule succeed !!!');\n      } else {\n         toast.error('🔥 Reloading all rule failed !!!');\n      }\n   };\n\n   const getAllEvents = async () => {\n      let res = null;\n      try {\n         res = await api.getAllEvents();\n         if (res.data.code !== 1) {\n            toast.error('🔥 Loading all events failed !!!');\n            return;\n         }\n      } catch (e) {\n         toast.error('🔥 Loading all events failed !!!');\n      }\n\n      return res.data.data.map((item) => `${item}\\n`);\n   };\n\n   const convertResults = () => {\n      return rules.map((item, index) => {\n         let REULTS = item.result.split(':')[0];\n         let string = '';\n         for (let i = 0; i < item.events.length; i++) {\n            string += item.events[i].split(':')[0];\n\n            let tmp = ' ^ ';\n            if (i === item.events.length - 1) tmp = ' => ';\n\n            string += tmp;\n         }\n\n         return `R${index + 1}: ${string}${REULTS}\\n`;\n      });\n   };\n\n   const renderPage = () => {\n      switch (page) {\n         case PageType.FIND_PLACES:\n            return (\n               <FindPlaces\n                  selectData={selectData}\n                  loadAllRule={loadAllRule}\n                  rules={rules}\n               >\n                  {rules.length !== 0 ? <Rules rules={rules} /> : null}\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </FindPlaces>\n            );\n         case PageType.MANAGE_EVENTS:\n            return (\n               <ManageEvents\n                  selectData={selectData}\n                  loadAllRule={loadAllRule}\n                  rules={rules}\n               >\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </ManageEvents>\n            );\n         default:\n            return (\n               <CreateRules selectData={selectData} loadAllRule={loadAllRule}>\n                  {rules.length !== 0 ? <Rules rules={rules} /> : null}\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </CreateRules>\n            );\n      }\n   };\n   return (\n      <>\n         <Manu\n            rules={convertResults}\n            getAllEvents={getAllEvents}\n            setPage={setPage}\n         />\n         {renderPage()}\n         <ToastContainer\n            position=\"bottom-right\"\n            autoClose={5000}\n            hideProgressBar={false}\n            newestOnTop={false}\n            rlt={false}\n            pauseOnHover\n            pauseOnFocusLoss\n            closeOnClick\n            draggable\n         />\n      </>\n   );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './styles/styles.scss';\nReactDOM.render(\n   <React.StrictMode>\n      <App />\n   </React.StrictMode>,\n   document.getElementById('root')\n);\n"],"sourceRoot":""}