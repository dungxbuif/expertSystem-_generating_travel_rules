(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{15:function(e,t,n){},35:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(9),r=n.n(s),l=n(4),i=n.n(l),u=n(7),o=n(6),d=n(3),b=(n(35),"CreateRules"),h="FindPlaces",j="ManageEvents",f=n(1);function p(e){var t=e.getAllEvents,n=e.rules,a=e.setPage,s=function(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),a=n[0],s=n[1];return Object(f.jsxs)("li",{className:"menu-button",children:[Object(f.jsx)("div",{href:"#",className:"icon-button",onClick:function(){return s(!a)},children:e.icon}),a&&e.children]})},r=function(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useRef)(null);Object(c.useEffect)((function(){var e;a(null===(e=s.current)||void 0===e?void 0:e.firstChild.offsetHeight)}),[]);var r=function(e){return Object(f.jsxs)("div",{href:"#",className:"menu-item",onClick:function(e){return u(e)},children:[Object(f.jsx)("span",{className:"icon-button",children:e.leftIcon}),e.children,Object(f.jsx)("span",{className:"icon-right",children:e.rightIcon})]})};return Object(f.jsx)("div",{className:"dropdown",style:{height:n,zIndex:"1"},ref:s,children:Object(f.jsxs)("div",{className:"menu",children:[Object(f.jsx)(r,{goToMenu:"main",leftIcon:"\ud83d\udcdd",onClick:u,children:"T\u1ea1o t\u1eadp lu\u1eadt"}),Object(f.jsx)(r,{leftIcon:"\ud83d\uddc3\ufe0f",onClick:u,children:"Qu\u1ea3n s\u1ef1 ki\u1ec7n"}),Object(f.jsx)(r,{leftIcon:"\ud83d\uddfa",onClick:u,children:"T\xecm \u0111\u1ecba \u0111i\u1ec3m"}),Object(f.jsx)(r,{leftIcon:"\ud83d\udce5",onClick:u,children:"T\u1ea3i t\u1eadp lu\u1eadt"})]})})},l=function(e,t){var n=document.createElement("a"),c=new Blob(e,{type:"text/plain"});n.href=URL.createObjectURL(c),n.download=t,document.body.appendChild(n),n.click()},u=function(){var e=Object(o.a)(i.a.mark((function e(c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.target.innerText.includes("T\u1ea3i t\u1eadp lu\u1eadt")){e.next=7;break}return l(n(),"Rules.txt"),e.t0=l,e.next=5,t();case 5:e.t1=e.sent,(0,e.t0)(e.t1,"Events.txt");case 7:c.target.innerText.includes("T\xecm \u0111\u1ecba \u0111i\u1ec3m")&&a(h),c.target.innerText.includes("Qu\u1ea3n s\u1ef1 ki\u1ec7n")&&a(j),c.target.innerText.includes("T\u1ea1o t\u1eadp lu\u1eadt")&&a(b);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(s,{icon:Object(f.jsx)("i",{className:"fas fa-bars"}),children:Object(f.jsx)(r,{})})}var O=n(10),v=n(29),m=n.n(v).a.create({baseURL:"http://dungxbuif-localhost:4000/"}),g=function(e){return m.post("api/create-new-rule",e)},x=n(2);n(15);function k(e){var t=e.selectData,n=e.children,a=e.loadAllRule,s=Object(c.useState)(null),r=Object(d.a)(s,2),l=r[0],u=r[1],b=Object(c.useState)(null),h=Object(d.a)(b,2),j=h[0],p=h[1],v=Object(c.useState)(null),m=Object(d.a)(v,2),k=m[0],y=m[1],w=function(){p(null),y(null)},N=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.value,n={result:t,events:j},x.b.info("\ud83d\udd04 Creating rule !!!",{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0}),e.next=5,g(n);case 5:1===(c=e.sent).data.code?(x.b.dismiss(),x.b.success("\ud83d\ude80 Creating rule succeed !!!"),w(),a()):2===c.data.code?(x.b.dismiss(),x.b.warning("\ud83d\udcd1 ".concat(c.data.message))):(x.b.dismiss(),x.b.error("\ud83d\udd25 Creating rule failed !!!"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"row justify-content-center pt-5 mt-5 ",children:[Object(f.jsx)(O.a,{closeMenuOnSelect:!!j,value:l,onChange:function(e){return function(e){u(e)}(e)},isMulti:!j,className:"w-50",options:t,placeholder:"Ch\u1ecdn s\u1ef1 ki\u1ec7n...",isDisabled:!t.length}),k?null:Object(f.jsx)("button",{type:"button",className:"btn btn-primary mx-1",onClick:function(){return function(){if(l&&null===j){var e=l.map((function(e){return e.value}));return u(null),void p(e)}if(null===k)return y(l),void u(null)}()},children:j?"Ch\u1ecdn k\u1ebft qu\u1ea3":"Ch\u1ecdn t\u1eadp s\u1ef1 ki\u1ec7n"}),k?Object(f.jsx)("button",{type:"button",className:"btn btn-warning mx-1",onClick:function(){return N()},children:"L\u01b0u"}):null,j?Object(f.jsx)("button",{type:"button",className:"btn  btn-light mx-1",onClick:function(){return w()},children:"Ch\u1ecdn l\u1ea1i"}):null]}),Object(f.jsx)("div",{className:"row justify-content-center mt-5",children:j&&Object(f.jsxs)("div",{className:"alert alert-success mt-5",role:"alert",children:[j.map((function(e,t){return Object(f.jsxs)("span",{children:[Object(f.jsx)("b",{children:e}),t!==j.length-1?"  ^  ":"  =>"]},t)})),null!=k?Object(f.jsx)("b",{children:k.value}):null]})}),Object(f.jsx)("div",{className:"row mt-5 pb-5 justify-content-between",children:n})]})}function y(e){var t=e.events;e.handleDelete;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("table",{className:"table table-bordered table-hover col-12 bg-white",children:[Object(f.jsx)("thead",{className:"thead-dark",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{scope:"col",children:"Lo\u1ea1i s\u1ef1 ki\u1ec7n"}),Object(f.jsx)("th",{scope:"col",children:"S\u1ef1 Ki\u1ec7n"})]})}),Object(f.jsx)("tbody",{children:t.map((function(e){return e.options.map((function(t,n){return Object(f.jsxs)("tr",{children:[0===n?Object(f.jsx)("th",{className:"font-weight-bold align-middle text-center",scope:"row",rowSpan:e.options.length,children:"".concat(e.value,": ").concat(e.label)}):null,Object(f.jsxs)("td",{className:"d-flex justify-content-between align-items-center",children:[t.value," "]})]},n)}))}))})]})})}function w(e){var t=e.rules;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("table",{className:"table table-bordered table-hover bg-white col-12",children:[Object(f.jsx)("thead",{className:"thead-dark",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{scope:"col",children:"S\u1ef1 ki\u1ec7n"}),Object(f.jsx)("th",{scope:"col",children:"K\u1ebft qu\u1ea3"})]})}),Object(f.jsx)("tbody",{children:t.map((function(e){return Object(f.jsxs)("tr",{style:{cursor:"pointer"},children:[Object(f.jsx)("td",{className:"text-center vertical-align-middle font-weight-bold",scope:"row",children:e.events.join(" ^ ")}),Object(f.jsx)("td",{className:"d-flex justify-content-between align-items-center",children:Object(f.jsx)("b",{children:e.result})})]},e.id)}))})]})})}function N(e){var t=e.selectData,n=e.children,a=(e.loadAllRule,Object(c.useState)([])),s=Object(d.a)(a,2),r=s[0],l=s[1],i=Object(c.useState)(null),u=Object(d.a)(i,2),o=u[0],b=u[1],h=Object(c.useState)(null),j=Object(d.a)(h,2),p=j[0];j[1];Object(c.useEffect)((function(){var e=t.map((function(e){return{value:e.value,label:e.label}}));b(e)}),[t]);return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"row justify-content-center pt-5 mt-5 ",children:[null!==o?Object(f.jsx)(O.a,{defaultValue:r[0],value:r,onChange:function(e){return function(e){l(e)}(e)},className:"col-3",options:o,placeholder:"Ch\u1ecdn s\u1ef1 ki\u1ec7n...",isDisabled:!t.length}):null,Object(f.jsx)("input",{type:"text",className:"form-control col-5",placeholder:"Nh\u1eadp s\u1ef1 ki\u1ec7n ...","aria-label":"Nh\u1eadp s\u1ef1 ki\u1ec7n","aria-describedby":"basic-addon2",onChange:function(e){console.log(e.target.value)}}),Object(f.jsx)("button",{type:"button",className:"btn btn-primary mx-1",onClick:function(){r&&p||x.b.error("You have to choose Events Type and events")},children:"Th\xeam s\u1ef1 Ki\u1ec7n"})]}),Object(f.jsx)("div",{className:"row mt-5 pb-5 justify-content-between",children:n})]})}var C=n(13),S=n(18),T=n(8),L=n.n(T),q=["H","A"],E=["C5","C3","G1","G2"],R=[],D=[],K=[],B=[],A=[];function P(e){var t;return t=e.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(C.a)({},t,(e[t]||0)+1))}),{}),Object.keys(t).filter((function(e){return t[e]>1}))}var I=function(e,t){K=[],B=[],D=[],R=[],A=[];var n=function(e,t){var n=Object(u.a)(e),c=function(e){var t=Object(u.a)(e),n={},c=[];return c=t.map((function(e){var t=e.id;return n[t]=e,t})),{tapLuatBanDau:n,maTapLuatBanDau:c}}(t),a=c.tapLuatBanDau,s=c.maTapLuatBanDau,r=[],l=1,i=!0,o=[];for(;i;){if(K.push("L\u1ea7n duy\u1ec7t th\u1ee9 ".concat(l,", c\xe1c lu\u1eadt th\u1ecfa: ")),d({events:e,maTapLuatBanDau:s}),!r.length){K.push("Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c k\u1ebft qu\u1ea3");break}if(h(),l++,!o.length&&!r.length){K.push("Kh\xf4ng t\xecm \u0111\u01b0\u1ee3c k\u1ebft qu\u1ea3");break}r.length||(i=!1)}return o;function d(){var e=[];s.forEach((function(t){a[t].events.every((function(e){return n.includes(e)}))&&(e.push(t),r.push(t),b(t))})),e.length||K.push("Kh\xf4ng t\xecm th\u1ea5y lu\u1eadt th\u1ecfa");var t=L.a.differenceWith(s,e,L.a.isEqual);s=t}function b(e){var t=j(a[e]);K.push("T\xecm th\u1ea5y lu\u1eadt th\u1ecfa: ".concat(t))}function h(){var e=r[0];r.shift();var t=a[e];n.push(t.result);var c=j(t);K.push("=> X\xe9t lu\u1eadt ".concat(c)),f(t.result)}function j(e){for(var t=e.result.split(":")[1],n="",c=0;c<e.events.length;c++){n+=e.events[c].split(":")[1];var a=" ^ ";c==e.events.length-1&&(a=" => "),n+=a}return"R".concat(e.id,": ").concat(n).concat(t)}function f(e){L()(["".concat(e.charAt(0))]).differenceWith(q,L.a.isEqual).isEmpty()&&!o.includes(e)&&(o.push(e),K.push("\tT\xecm th\u1ea5y k\u1ebft qu\u1ea3: ".concat(e.split(":")[1])))}}(e,t);e.length>1&&K.unshift("====X\xe9t to\xe0n b\u1ed9 s\u1ef1 ki\u1ec7n===="),function(e,t){e.forEach((function(n){e.length>1&&K.push("====X\xe9t ri\xeang s\u1ef1 ki\u1ec7n ".concat(n,"====")),function(e,t){var n=[],c=!1;-1!==E.indexOf(e.split(": ")[0])&&(K.push("Ph\xe1t hi\u1ec7n s\u1ef1 ki\u1ec7n ngo\u1ea1i l\u1ec7"),R.push(e));R.length>1&&(c=!0);if(t.filter((function(t){t.events.includes(e)&&!n.includes(t.result)&&(n.push(t.result),-1!==E.indexOf(e.split(": ")[0])&&D.push(t.result),K.push("T\xecm th\u1ea5y k\u1ebft qu\u1ea3: ".concat(t.result.split(":")[1])))})),c){var a=P(D);D=a}B=[].concat(Object(u.a)(B),n)}(n,t)}))}(e,t),K.push("Ch\u1ecdn ra c\xe1c k\u1ebft qu\u1ea3 tr\xf9ng l\u1eb7p");var c=P(B),a=[].concat(Object(u.a)(n),Object(u.a)(c));R.length?(K.push("L\u1ecdc c\xe1c k\u1ebft qu\u1ea3 ngo\u1ea1i l\u1ec7"),A=0==D.length?[]:P([].concat(Object(u.a)(a),Object(u.a)(D)))):A=Object(u.a)(new Set(a));var s=L.a.differenceWith(a,A,L.a.isEqual).map((function(e){return e.split(": ")[1]}));return K.push("==> K\u1ebft qu\u1ea3 cu\u1ed1i c\xf9ng: ".concat(A.length>1?A.map((function(e){return e.split(": ")[1]})).join(" v "):1==A.length?A[0]:"Kh\xf4ng t\xecm th\u1ea5y k\u1ebft qu\u1ea3")),K.push("K\u1ebft th\xfac thu\u1eadt to\xe1n"),{LOG:K,lastResult:A,suggests:s}};function M(e){var t=e.selectData,n=e.rules,a=Object(c.useState)(null),s=Object(d.a)(a,2),r=s[0],l=s[1],i=Object(c.useState)(null),u=Object(d.a)(i,2),o=u[0],b=u[1],h=Object(c.useState)(null),j=Object(d.a)(h,2),p=j[0],v=j[1],m=Object(c.useState)(null),g=Object(d.a)(m,2),k=g[0],y=g[1],w=Object(c.useState)(null),N=Object(d.a)(w,2),C=N[0],S=N[1];return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)("div",{className:"row justify-content-center pt-5 mt-5 ",children:[Object(f.jsx)(O.a,{closeMenuOnSelect:!!o,value:r,onChange:function(e){return function(e){l(e)}(e)},isMulti:!o,className:"w-50",options:t,placeholder:"Ch\u1ecdn s\u1ef1 ki\u1ec7n..."}),Object(f.jsx)("button",{type:"button",className:"btn btn-primary mx-1",onClick:function(){return function(){if(null===o){var e=r.map((function(e){return e.value}));return l(null),void b(e)}x.b.info("\ud83d\udd04 We are  finding the best place for you !!!",{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0});var t=I(o,n),c=t.LOG,a=t.lastResult,s=t.suggests;x.b.dismiss(),x.b.success("\ud83d\ude80 Finding places succeed !!!"),y(c),S(a),v(s)}()},children:o?"T\xecm \u0111\u1ecba \u0111i\u1ec3m":"Th\xeam t\u1eadp s\u1ef1 ki\u1ec7n"}),o?Object(f.jsx)("button",{type:"button",className:"btn  btn-light mx-1",onClick:function(){return l(null),b(null),y(null),S(null),void v(null)},children:"Ch\u1ecdn l\u1ea1i"}):null]}),Object(f.jsx)("div",{className:"row justify-content-center mt-5 mb-3",children:o&&Object(f.jsxs)("div",{className:"alert alert-success mt-5",role:"alert",children:[o.map((function(e,t){return Object(f.jsxs)("span",{children:[Object(f.jsx)("b",{children:e.split(": ")[1]}),t!==o.length-1?"  ^  ":" => "]},t)})),null!==C&&1===C.length?Object(f.jsx)("b",{children:C[0]}):null!==C&&C.length>1?Object(f.jsx)("b",{children:C.map((function(e){return e.split(": ")[1]})).join(" v ")}):Object(f.jsx)("span",{className:"badge badge-danger",style:{fontSize:"1rem"},children:"Kh\xf4ng c\xf3 k\u1ebft qu\u1ea3"})]})}),Object(f.jsx)("div",{className:"row justify-content-center",children:p&&p.length&&Object(f.jsxs)("div",{className:"alert alert-info",role:"alert",children:[Object(f.jsx)("span",{className:"badge badge-warning",style:{fontSize:"1rem"},children:"G\u1ee3i \xfd:"})," ",p.map((function(e,t){return Object(f.jsxs)("span",{children:[Object(f.jsx)("b",{children:e}),t!==p.length-1?"    v    ":null]},t)}))]})}),Object(f.jsx)("div",{className:"row mt-5 pb-5 justify-content-between",children:k?Object(f.jsxs)("table",{className:"table table-bordered table-hover bg-white col-12",children:[Object(f.jsx)("thead",{className:"thead-dark",children:Object(f.jsx)("tr",{children:Object(f.jsx)("th",{scope:"col",children:"Qu\xe1 tr\xecnh th\u1ef1c hi\u1ec7n thu\u1eadt to\xe1n"})})}),Object(f.jsx)("tbody",{children:k.map((function(e,t){return Object(f.jsx)("tr",{children:Object(f.jsx)("td",{className:e.includes("L\u1ea7n duy\u1ec7t th\u1ee9")||e.includes("=> X\xe9t lu\u1eadt")||e.includes("X\xe9t ri\xeang")||e.includes("X\xe9t to\xe0n")||e.includes("L\u1ecdc c\xe1c k\u1ebft qu\u1ea3 ngo\u1ea1i l\u1ec7")||e.includes("Ch\u1ecdn ra c\xe1c k\u1ebft qu\u1ea3 tr\xf9ng l\u1eb7p")?"text-left font-weight-bold":e.includes("T\xecm th\u1ea5y")?"alert-success pl-5 text-left":e.includes("Kh\xf4ng t\xecm")?"alert-danger pl-5 text-left":e.includes("l\u1ecdc tr\xf9ng")?"alert-secondary pl-5 text-left":e.includes("K\u1ebft qu\u1ea3 cu\u1ed1i c\xf9ng")?"alert-warning pl-5 text-left":e.includes("K\u1ebft th\xfac thu\u1eadt to\xe1n")?"alert-dark text-left":e.includes("Ph\xe1t hi\u1ec7n s\u1ef1 ki\u1ec7n")?"alert-info text-left":"text-left",scope:"row",children:e})},t)}))})]}):null})]})}var F=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),r=Object(d.a)(s,2),l=r[0],O=r[1],v=Object(c.useState)(b),g=Object(d.a)(v,2),C=g[0],S=g[1],T=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("api/spreadsheets/get-all-rules");case 2:return t=e.sent,(n=Object(u.a)(t.data.data)).forEach((function(e){e.events.sort()})),n.sort((function(e,t){return e.events[0].split(":")[0].localeCompare(t.events[0].split(":")[0])})),n.sort((function(e,t){return e.events.length-t.events.length})),t.data.data=n,e.abrupt("return",t.data);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){x.b.info("\ud83d\udd04 Loading data !!!",{position:"bottom-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0}),function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.get("api/spreadsheets/get-group-events");case 2:return t=e.sent,e.next=5,T();case 5:n=e.sent,1===t.data.code&&1===n.code?(a(t.data.data),O(n.data),x.b.dismiss(),x.b.success("\ud83d\ude80 Loading select succeed !!!")):x.b.error("\ud83d\udd25 Loading data failed !!!");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var L=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:1===(t=e.sent).code?(O(t.data),x.b.dismiss(),x.b.success("\ud83d\ude80 Reloading all rule succeed !!!")):x.b.error("\ud83d\udd25 Reloading all rule failed !!!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,m.get("api/spreadsheets/get-all-events");case 4:if(1===(t=e.sent).data.code){e.next=8;break}return x.b.error("\ud83d\udd25 Loading all events failed !!!"),e.abrupt("return");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),x.b.error("\ud83d\udd25 Loading all events failed !!!");case 13:return e.abrupt("return",t.data.data.map((function(e){return"".concat(e,"\n")})));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p,{rules:function(){return l.map((function(e,t){for(var n=e.result.split(":")[0],c="",a=0;a<e.events.length;a++){c+=e.events[a].split(":")[0];var s=" ^ ";a===e.events.length-1&&(s=" => "),c+=s}return"R".concat(t+1,": ").concat(c).concat(n,"\n")}))},getAllEvents:q,setPage:S}),function(){switch(C){case h:return Object(f.jsxs)(M,{selectData:n,loadAllRule:L,rules:l,children:[0!==l.length?Object(f.jsx)(w,{rules:l}):null,0!==n.length?Object(f.jsx)(y,{events:n}):null]});case j:return Object(f.jsx)(N,{selectData:n,loadAllRule:L,rules:l,children:0!==n.length?Object(f.jsx)(y,{events:n}):null});default:return Object(f.jsxs)(k,{selectData:n,loadAllRule:L,children:[0!==l.length?Object(f.jsx)(w,{rules:l}):null,0!==n.length?Object(f.jsx)(y,{events:n}):null]})}}(),Object(f.jsx)(x.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,rlt:!1,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0})]})};n(72),n(73);r.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(F,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.98e2eb28.chunk.js.map