{"version":3,"sources":["config/PageType.js","components/Menu.js","apis/index.js","components/CreateRules.js","components/Events.js","components/Rules.js","components/ManageEvents.js","process/index.js","components/FindPlaces.js","App.js","index.js"],"names":["PageType","Menu","getAllEvents","rules","setPage","NavItem","props","useState","open","setOpen","className","href","onClick","icon","children","DropdownMenu","menuHeight","setMenuHeight","dropdownRef","useRef","useEffect","current","firstChild","offsetHeight","DropdownItem","e","testOnClick","leftIcon","rightIcon","style","height","zIndex","ref","goToMenu","createFile","fileText","name","element","document","createElement","file","Blob","type","URL","createObjectURL","download","body","appendChild","click","a","target","innerText","includes","createEvent","data","axios","post","CreateRules","selectData","loadAllRule","selectedOption","setSelectedOption","events","setEvents","result","setResult","reset","handleSave","sendResult","value","sendData","toast","info","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","res","code","dismiss","success","warning","message","error","closeMenuOnSelect","onChange","handleChange","isMulti","options","placeholder","isDisabled","length","map","item","handleOnClick","role","ele","index","Events","handleDelete","scope","rowSpan","label","Rules","cursor","join","id","setOptions","push","eventType","api","ID","event","defaultValue","aria-label","aria-describedby","KET_LUAN","SU_KIEN_NGOAI_LE","suKienNgoaiLe","kqNgoaiLe","LOG","ketQuaTungSuKien","lastResult","getDuplicateValue","arr","dict","reduce","b","Object","keys","filter","ketQuaToanBo","suKienGiaThiet","tapLuatBanDau","maTapLuatBanDau","MA_TAP_LUAT","khoiTaoTapLuatBanDau","tapLuatThoa","i","flag","tapKetLuan","timLuatThoa","xetLuatDauTien","maLuatThoa","forEach","maLuat","every","taoLogLuatThoa","tmp","_","differenceWith","isEqual","string","formatLuat","shift","tmpLuat","kiemTraKetQua","luat","REULTS","split","ketQua","charAt","isEmpty","xetToanBoSuKien","unshift","indexOf","xetTungSuKien","eachEvents","ketQuaTrungLap","tatCaCacKQ","Set","suggests","FindPlaces","suggest","setSuggest","log","setLog","setLastResult","Algorithm","fontSize","App","setSelectData","setRules","page","getAllRules","get","sort","localeCompare","res1","getData","renderPage","newestOnTop","rlt","pauseOnFocusLoss","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.82fb84dc.chunk.js","sourcesContent":["export const PageType = {\r\n   CREATE_RULES: 'CreateRules',\r\n   FIND_PLACES: 'FindPlaces',\r\n   MANAGE_EVENTS: 'ManageEvents',\r\n};\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport '../styles/menu.scss';\r\nimport { PageType } from '../config/PageType';\r\n\r\nexport default function Menu({ getAllEvents, rules, setPage }) {\r\n   const NavItem = (props) => {\r\n      const [open, setOpen] = useState(false);\r\n\r\n      return (\r\n         <li className='menu-button'>\r\n            <div href='#' className='icon-button' onClick={() => setOpen(!open)}>\r\n               {props.icon}\r\n            </div>\r\n\r\n            {open && props.children}\r\n         </li>\r\n      );\r\n   };\r\n\r\n   const DropdownMenu = () => {\r\n      const [menuHeight, setMenuHeight] = useState(null);\r\n      const dropdownRef = useRef(null);\r\n      useEffect(() => {\r\n         setMenuHeight(dropdownRef.current?.firstChild.offsetHeight);\r\n      }, []);\r\n      const DropdownItem = (props) => {\r\n         return (\r\n            <div href='#' className='menu-item' onClick={(e) => testOnClick(e)}>\r\n               <span className='icon-button'>{props.leftIcon}</span>\r\n               {props.children}\r\n               <span className='icon-right'>{props.rightIcon}</span>\r\n            </div>\r\n         );\r\n      };\r\n\r\n      return (\r\n         <div className='dropdown' style={{ height: menuHeight, zIndex: '1' }} ref={dropdownRef}>\r\n            <div className='menu'>\r\n               <DropdownItem goToMenu='main' leftIcon='📝' onClick={testOnClick}>\r\n                  Tạo tập luật\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon='🗃️' onClick={testOnClick}>\r\n                  Quản lý sự kiện\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon='🗺' onClick={testOnClick}>\r\n                  Tìm địa điểm\r\n               </DropdownItem>\r\n               <DropdownItem leftIcon='📥' onClick={testOnClick}>\r\n                  Tải tập luật\r\n               </DropdownItem>\r\n            </div>\r\n         </div>\r\n      );\r\n   };\r\n\r\n   const createFile = (fileText, name) => {\r\n      const element = document.createElement('a');\r\n      const file = new Blob(fileText, {\r\n         type: 'text/plain',\r\n      });\r\n      element.href = URL.createObjectURL(file);\r\n      element.download = name;\r\n      document.body.appendChild(element); // Required for this to work in FireFox\r\n      element.click();\r\n   };\r\n\r\n   const testOnClick = async (e) => {\r\n      if (e.target.innerText.includes('Tải tập luật')) {\r\n         createFile(rules(), 'Rules.txt');\r\n         createFile(await getAllEvents(), 'Events.txt');\r\n      }\r\n\r\n      if (e.target.innerText.includes('Tìm địa điểm')) {\r\n         setPage(PageType.FIND_PLACES);\r\n      }\r\n\r\n      if (e.target.innerText.includes('Quản lý sự kiện')) {\r\n         setPage(PageType.MANAGE_EVENTS);\r\n      }\r\n\r\n      if (e.target.innerText.includes('Tạo tập luật')) {\r\n         setPage(PageType.CREATE_RULES);\r\n      }\r\n   };\r\n   return (\r\n      <NavItem icon={<i className='fas fa-bars'></i>}>\r\n         <DropdownMenu></DropdownMenu>\r\n      </NavItem>\r\n   );\r\n}\r\n","import axios from 'axios';\r\n\r\nexport const getGroupEvents = () => axios.get('api/spreadsheets/get-group-events');\r\n\r\nexport const getAllEvents = () => axios.get('api/spreadsheets/get-all-events');\r\n\r\nexport const getAllRules = () => axios.get('api/spreadsheets/get-all-rules');\r\n\r\nexport const createNewRule = (data) => axios.post('api/spreadsheets/create-new-rule', data);\r\n\r\nexport const createEventType = (data) => axios.post('api/spreadsheets/create-event-type', data);\r\n\r\nexport const createEvent = (data) => axios.post('api/spreadsheets/create-event', data);\r\n","import React, { useState } from 'react';\r\nimport Select from 'react-select';\r\nimport * as api from '../apis';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\n\r\nexport default function CreateRules({ selectData, children, loadAllRule }) {\r\n   const [selectedOption, setSelectedOption] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n   const [result, setResult] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n   const handleOnClick = () => {\r\n      if (selectedOption && events === null) {\r\n         let data = selectedOption.map((item) => item.value);\r\n         setSelectedOption(null);\r\n         setEvents(data);\r\n         return;\r\n      }\r\n\r\n      if (result === null) {\r\n         setResult(selectedOption);\r\n         setSelectedOption(null);\r\n\r\n         return;\r\n      }\r\n   };\r\n   const reset = () => {\r\n      setEvents(null);\r\n      setResult(null);\r\n   };\r\n   const handleSave = async () => {\r\n      const sendResult = result.value;\r\n      let sendData = {\r\n         result: sendResult,\r\n         events,\r\n      };\r\n      toast.info('🔄 Creating rule !!!', {\r\n         position: 'bottom-right',\r\n         autoClose: false,\r\n         hideProgressBar: false,\r\n         closeOnClick: false,\r\n         pauseOnHover: false,\r\n         draggable: false,\r\n         progress: undefined,\r\n      });\r\n      const res = await api.createNewRule(sendData);\r\n      if (res.data.code === 1) {\r\n         toast.dismiss();\r\n         toast.success('🚀 Creating rule succeed !!!');\r\n         reset();\r\n         loadAllRule();\r\n      } else if (res.data.code === 2) {\r\n         toast.dismiss();\r\n         toast.warning(`📑 ${res.data.message}`);\r\n      } else {\r\n         toast.dismiss();\r\n         toast.error('🔥 Creating rule failed !!!');\r\n      }\r\n   };\r\n   return (\r\n      <div className=\"container\">\r\n         <div className=\"row justify-content-center pt-5 mt-5 \">\r\n            <Select\r\n               closeMenuOnSelect={events ? true : false}\r\n               value={selectedOption}\r\n               onChange={(e) => handleChange(e)}\r\n               isMulti={events ? false : true}\r\n               className=\"w-50\"\r\n               options={selectData}\r\n               placeholder=\"Chọn sự kiện...\"\r\n               isDisabled={selectData.length ? false : true}\r\n            />\r\n            {result ? null : (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-primary mx-1\"\r\n                  onClick={() => handleOnClick()}\r\n               >\r\n                  {events ? 'Chọn kết quả' : 'Chọn tập sự kiện'}\r\n               </button>\r\n            )}\r\n            {!result ? null : (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn btn-warning mx-1\"\r\n                  onClick={() => handleSave()}\r\n               >\r\n                  Lưu\r\n               </button>\r\n            )}\r\n            {events ? (\r\n               <button\r\n                  type=\"button\"\r\n                  className=\"btn  btn-light mx-1\"\r\n                  onClick={() => reset()}\r\n               >\r\n                  Chọn lại\r\n               </button>\r\n            ) : null}\r\n         </div>\r\n         <div className=\"row justify-content-center mt-5\">\r\n            {events && (\r\n               <div className=\"alert alert-success mt-5\" role=\"alert\">\r\n                  {events.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele}</b>\r\n                        {index !== events.length - 1 ? '  ^  ' : '  =>'}\r\n                     </span>\r\n                  ))}\r\n                  {result != null ? <b>{result.value}</b> : null}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className=\"row mt-5 pb-5 justify-content-between\">{children}</div>\r\n      </div>\r\n   );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Events({ events, handleDelete = null }) {\r\n   return (\r\n      <>\r\n         <table className=\"table table-bordered table-hover col-12 bg-white\">\r\n            <thead className=\"thead-dark\">\r\n               <tr>\r\n                  <th scope=\"col\">Loại sự kiện</th>\r\n                  <th scope=\"col\">Sự Kiện</th>\r\n               </tr>\r\n            </thead>\r\n            <tbody>\r\n               {events.map((item) =>\r\n                  item.options.map((ele, index) => (\r\n                     <tr key={index}>\r\n                        {index === 0 ? (\r\n                           <th\r\n                              className=\"font-weight-bold align-middle text-center\"\r\n                              scope=\"row\"\r\n                              rowSpan={item.options.length}\r\n                           >\r\n                              {`${item.value}: ${item.label}`}\r\n                           </th>\r\n                        ) : null}\r\n                        <td className=\"d-flex justify-content-between align-items-center\">\r\n                           {ele.value}{' '}\r\n                           {/* {handleDelete !== null ? (\r\n                              <button className=\"btn btn-danger\">Xóa</button>\r\n                           ) : null} */}\r\n                        </td>\r\n                     </tr>\r\n                  ))\r\n               )}\r\n            </tbody>\r\n         </table>\r\n      </>\r\n   );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Rules({ rules }) {\r\n   return (\r\n      <>\r\n         <table className='table table-bordered table-hover bg-white col-12'>\r\n            <thead className='thead-dark'>\r\n               <tr>\r\n                  <th scope='col'>Sự kiện</th>\r\n                  <th scope='col'>Kết quả</th>\r\n               </tr>\r\n            </thead>\r\n            <tbody>\r\n               {rules.map((item) => (\r\n                  <tr key={item.id} style={{ cursor: 'pointer' }}>\r\n                     <td className='text-center vertical-align-middle font-weight-bold'>\r\n                        {item.events.join(' ^ ')}\r\n                     </td>\r\n\r\n                     <td className='d-flex justify-content-between align-items-center'>\r\n                        <b>{item.result}</b>\r\n                        {/* <button className=\"btn btn-danger\">Xóa</button> */}\r\n                     </td>\r\n                  </tr>\r\n               ))}\r\n            </tbody>\r\n         </table>\r\n      </>\r\n   );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Select from 'react-select';\r\nimport * as api from '../apis';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\n\r\nexport default function CreateRules({ selectData, children, loadAllRule }) {\r\n   const [selectedOption, setSelectedOption] = useState([]);\r\n   const [options, setOptions] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n\r\n   const handleInputOnChange = (e) => {\r\n      let event = e.target.value;\r\n      setEvents(event);\r\n   };\r\n\r\n   useEffect(() => {\r\n      let data = selectData.map((item) => ({\r\n         value: item.value,\r\n         label: item.label,\r\n      }));\r\n      data.push({ value: 'ADD_EVENT_TYPES', label: 'Thêm loại tập luật' });\r\n      setOptions(data);\r\n   }, [selectData]);\r\n\r\n   const handleOnClick = async () => {\r\n      if (!selectedOption || !events) {\r\n         toast.error(`You have to choose Events Type and events`);\r\n         return;\r\n      }\r\n      try {\r\n         toast.info('🔄 Creating event/event type !!!', {\r\n            position: 'bottom-right',\r\n            autoClose: false,\r\n            hideProgressBar: false,\r\n            closeOnClick: false,\r\n            pauseOnHover: false,\r\n            draggable: false,\r\n            progress: undefined,\r\n         });\r\n         let res = null;\r\n\r\n         if (selectedOption.value === 'ADD_EVENT_TYPES') {\r\n            res = await api.createEventType({ eventType: events });\r\n         } else {\r\n            res = await api.createEvent({ ID: selectedOption.value, event: events });\r\n         }\r\n\r\n         toast.dismiss();\r\n         if (res.data.code === 1) {\r\n            toast.success('🚀 Creating event/event type succeed !!!');\r\n         } else {\r\n            toast.error(`🔥 Creating event/event type failed. ${res.data.message}`);\r\n         }\r\n      } catch (ex) {\r\n         toast.error(`🔥 Creating event/events type failed. ${ex.message}`);\r\n      }\r\n   };\r\n\r\n   return (\r\n      <div className='container'>\r\n         <div className='row justify-content-center pt-5 mt-5 '>\r\n            {options !== null ? (\r\n               <Select\r\n                  defaultValue={selectedOption[0]}\r\n                  value={selectedOption}\r\n                  onChange={(e) => handleChange(e)}\r\n                  className='col-3'\r\n                  options={options}\r\n                  placeholder='Chọn sự kiện...'\r\n                  isDisabled={selectData.length ? false : true}\r\n               />\r\n            ) : null}\r\n\r\n            <input\r\n               type='text'\r\n               className='form-control col-5'\r\n               placeholder='Nhập nội dung ...'\r\n               aria-label='Nhập sự kiện'\r\n               aria-describedby='basic-addon2'\r\n               onChange={handleInputOnChange}\r\n            />\r\n\r\n            <button type='button' className='btn btn-primary mx-1' onClick={() => handleOnClick()}>\r\n               Thêm nội dung\r\n            </button>\r\n         </div>\r\n\r\n         <div className='row mt-5 pb-5 justify-content-between'>{children}</div>\r\n      </div>\r\n   );\r\n}\r\n","import _ from 'lodash';\r\n\r\n//Khai báo một số hằng\r\nconst KET_LUAN = ['H', 'A'];\r\nconst SU_KIEN_NGOAI_LE = ['C5', 'C3', 'G', 'G', 'A'];\r\n\r\n//Khai báo 1 số biến toàn cục\r\nvar suKienNgoaiLe = [];\r\nvar kqNgoaiLe = [];\r\nvar LOG = [];\r\nvar ketQuaTungSuKien = [];\r\nvar lastResult = [];\r\n\r\nconst excute = (events, rules) => {\r\n   //Reset biến toàn cục\r\n   LOG = [];\r\n   ketQuaTungSuKien = [];\r\n   kqNgoaiLe = [];\r\n   suKienNgoaiLe = [];\r\n   lastResult = [];\r\n\r\n   // Xét thuật toán suy diễn tiến với toàn bộ sự kiện\r\n   let ketQuaToanBo = xetToanBoSuKien(events, rules);\r\n\r\n   if (events.length > 1) LOG.unshift('====Xét toàn bộ sự kiện====');\r\n\r\n   //Xét riêng lẻ từng sự kiện\r\n   eachEvents(events, rules);\r\n\r\n   LOG.push('Chọn ra các kết quả trùng lặp');\r\n\r\n   let ketQuaTrungLap = getDuplicateValue(ketQuaTungSuKien);\r\n\r\n   let tatCaCacKQ = [...ketQuaToanBo, ...ketQuaTrungLap];\r\n\r\n   if (suKienNgoaiLe.length) {\r\n      LOG.push('Lọc các kết quả ngoại lệ');\r\n\r\n      /* Nếu có sự kiện ngoại lệ mà các sự kiện đó không\r\n       có kết quả trùng thì kết quả cuối cùng cũng không có*/\r\n      if (kqNgoaiLe.length === 0) {\r\n         lastResult = [];\r\n      } else {\r\n         lastResult = getDuplicateValue([...tatCaCacKQ, ...kqNgoaiLe]);\r\n      }\r\n   } else {\r\n      lastResult = [...new Set(tatCaCacKQ)];\r\n   }\r\n\r\n   let suggests = _.differenceWith(tatCaCacKQ, lastResult, _.isEqual).map(\r\n      (item) => item.split(': ')[1],\r\n   );\r\n   LOG.push(\r\n      `==> Kết quả cuối cùng: ${\r\n         lastResult.length > 1\r\n            ? lastResult.map((item) => item.split(': ')[1]).join(' v ')\r\n            : lastResult.length === 1\r\n            ? lastResult[0]\r\n            : 'Không tìm thấy kết quả'\r\n      }`,\r\n   );\r\n\r\n   LOG.push('Kết thúc thuật toán');\r\n\r\n   return { LOG, lastResult, suggests };\r\n};\r\n\r\nfunction eachEvents(events, rules) {\r\n   events.forEach((item) => {\r\n      if (events.length > 1) LOG.push(`====Xét riêng sự kiện ${item}====`);\r\n      xetTungSuKien(item, rules);\r\n   });\r\n}\r\n\r\nfunction getDuplicateValue(arr) {\r\n   const count = (names) => names.reduce((a, b) => ({ ...a, [b]: (a[b] || 0) + 1 }), {});\r\n\r\n   const duplicates = (dict) => Object.keys(dict).filter((a) => dict[a] > 1);\r\n\r\n   //Trả lại mảng các phần từ trùng nhau\r\n   return duplicates(count(arr));\r\n}\r\n\r\nfunction khoiTaoTapLuatBanDau(rules) {\r\n   // rules =[{ id: \"1\", result: \"H20: Vườn Quốc Gia Ba Vì\", events: (1) […] },...]\r\n   let arr = [...rules];\r\n   let tapLuatBanDau = {},\r\n      maTapLuatBanDau = [];\r\n\r\n   maTapLuatBanDau = arr.map((item) => {\r\n      let MA_TAP_LUAT = item.id;\r\n      tapLuatBanDau[MA_TAP_LUAT] = item;\r\n      return MA_TAP_LUAT;\r\n   });\r\n\r\n   return { tapLuatBanDau, maTapLuatBanDau };\r\n}\r\n\r\nfunction xetTungSuKien(event, rules) {\r\n   let data = [];\r\n   let flag = false;\r\n   if (\r\n      SU_KIEN_NGOAI_LE.indexOf(event.split(': ')[0]) !== -1 ||\r\n      SU_KIEN_NGOAI_LE.indexOf(event.charAt(0)) !== -1\r\n   ) {\r\n      LOG.push('Phát hiện sự kiện ngoại lệ');\r\n      suKienNgoaiLe.push(event);\r\n   }\r\n\r\n   if (suKienNgoaiLe.length > 1) flag = true;\r\n\r\n   rules.forEach((item) => {\r\n      if (item.events.includes(event) && !data.includes(item.result)) {\r\n         data.push(item.result);\r\n         if (\r\n            SU_KIEN_NGOAI_LE.indexOf(event.split(': ')[0]) !== -1 ||\r\n            SU_KIEN_NGOAI_LE.indexOf(event.charAt(0)) !== -1\r\n         )\r\n            kqNgoaiLe.push(item.result);\r\n         LOG.push(`Tìm thấy kết quả: ${item.result.split(':')[1]}`);\r\n      }\r\n   });\r\n\r\n   if (flag) {\r\n      let tmp = getDuplicateValue(kqNgoaiLe);\r\n      kqNgoaiLe = tmp;\r\n   }\r\n\r\n   ketQuaTungSuKien = [...ketQuaTungSuKien, ...data];\r\n}\r\n\r\nfunction xetToanBoSuKien(events, rules) {\r\n   let suKienGiaThiet = [...events];\r\n   let { tapLuatBanDau, maTapLuatBanDau } = khoiTaoTapLuatBanDau(rules);\r\n   // maTapLuatBanDau = [1,2,...,165]\r\n   // {1:{ id: \"1\", result: \"H20: Vườn Quốc Gia Ba Vì\", events: (1) […] },...}\r\n   // rules =[{ id: \"1\", result: \"H20: Vườn Quốc Gia Ba Vì\", events: (1) […] },...]\r\n   let tapLuatThoa = [];\r\n   let i = 1;\r\n   let flag = true;\r\n   let tapKetLuan = [];\r\n\r\n   // Chạy thuật toán\r\n   while (flag) {\r\n      LOG.push(`Lần duyệt thứ ${i}, các luật thỏa: `);\r\n      //Tìm các luật thỏa SAT\r\n      timLuatThoa({ events, maTapLuatBanDau });\r\n\r\n      if (!tapLuatThoa.length) {\r\n         LOG.push('Không tìm được kết quả');\r\n         break;\r\n      }\r\n\r\n      //Xét luật thỏa đầu tiên trong mảng\r\n      xetLuatDauTien();\r\n\r\n      i++;\r\n      if (!tapKetLuan.length && !tapLuatThoa.length) {\r\n         LOG.push('Không tìm được kết quả');\r\n         break;\r\n      }\r\n\r\n      if (!tapLuatThoa.length) {\r\n         flag = false;\r\n      }\r\n   }\r\n\r\n   return tapKetLuan;\r\n\r\n   function timLuatThoa() {\r\n      let maLuatThoa = [];\r\n\r\n      // Lặp tất cả để tìm các luật thỏa\r\n      maTapLuatBanDau.forEach((maLuat) => {\r\n         if (tapLuatBanDau[maLuat].events.every((e) => suKienGiaThiet.includes(e))) {\r\n            maLuatThoa.push(maLuat);\r\n            tapLuatThoa.push(maLuat);\r\n            taoLogLuatThoa(maLuat);\r\n         }\r\n      });\r\n\r\n      if (!maLuatThoa.length) LOG.push(`Không tìm thấy luật thỏa`);\r\n\r\n      //Xóa luật thỏa khỏi mảng tất cả các luật\r\n      let tmp = _.differenceWith(maTapLuatBanDau, maLuatThoa, _.isEqual);\r\n      maTapLuatBanDau = tmp;\r\n   }\r\n\r\n   function taoLogLuatThoa(maLuat) {\r\n      let tmpLuat = tapLuatBanDau[maLuat];\r\n\r\n      let string = formatLuat(tmpLuat);\r\n\r\n      LOG.push(`Tìm thấy luật thỏa: ${string}`);\r\n   }\r\n\r\n   function xetLuatDauTien() {\r\n      //Lấy mã của luật đầu tiên\r\n      let maLuat = tapLuatThoa[0];\r\n\r\n      //Xóa luật đầu tiên ra khỏi mảng\r\n      tapLuatThoa.shift();\r\n\r\n      let tmpLuat = tapLuatBanDau[maLuat];\r\n\r\n      suKienGiaThiet.push(tmpLuat.result);\r\n\r\n      let string = formatLuat(tmpLuat);\r\n\r\n      LOG.push(`=> Xét luật ${string}`);\r\n\r\n      //Kiểm tra kết quả đã có trong mệnh đề hay không\r\n      kiemTraKetQua(tmpLuat.result);\r\n   }\r\n\r\n   function formatLuat(luat) {\r\n      let REULTS = luat.result.split(':')[1];\r\n      let string = '';\r\n      for (let i = 0; i < luat.events.length; i++) {\r\n         string += luat.events[i].split(':')[1];\r\n\r\n         let tmp = ' ^ ';\r\n         if (i === luat.events.length - 1) tmp = ' => ';\r\n\r\n         string += tmp;\r\n      }\r\n      return `R${luat.id}: ${string}${REULTS}`;\r\n   }\r\n\r\n   function kiemTraKetQua(ketQua) {\r\n      if (\r\n         _([`${ketQua.charAt(0)}`])\r\n            .differenceWith(KET_LUAN, _.isEqual)\r\n            .isEmpty() &&\r\n         !tapKetLuan.includes(ketQua)\r\n      ) {\r\n         tapKetLuan.push(ketQua);\r\n         LOG.push(`\\tTìm thấy kết quả: ${ketQua.split(':')[1]}`);\r\n      }\r\n   }\r\n}\r\nexport default { excute };\r\n","import React, { useState } from 'react';\r\nimport Select from 'react-select';\r\nimport { toast } from 'react-toastify';\r\nimport '../styles/boostrap.scss';\r\nimport Algorithm from '../process';\r\n\r\nexport default function FindPlaces({ selectData, rules }) {\r\n   const [selectedOption, setSelectedOption] = useState(null);\r\n   const [events, setEvents] = useState(null);\r\n   const [suggest, setSuggest] = useState(null);\r\n   const [log, setLog] = useState(null);\r\n   const [lastResult, setLastResult] = useState(null);\r\n\r\n   const handleChange = (e) => {\r\n      setSelectedOption(e);\r\n   };\r\n   const handleOnClick = () => {\r\n      if (selectedOption === null && events === null) {\r\n         toast.error(`Please choose the events`);\r\n         return;\r\n      }\r\n\r\n      if (events === null) {\r\n         let data = selectedOption.map((item) => item.value);\r\n         setSelectedOption(null);\r\n         setEvents(data);\r\n         return;\r\n      } else {\r\n         toast.info('🔄 We are  finding the best place for you !!!', {\r\n            position: 'bottom-right',\r\n            autoClose: false,\r\n            hideProgressBar: false,\r\n            closeOnClick: false,\r\n            pauseOnHover: false,\r\n            draggable: false,\r\n            progress: undefined,\r\n         });\r\n         let { LOG, lastResult, suggests } = Algorithm.excute(events, rules);\r\n\r\n         toast.dismiss();\r\n         toast.success('🚀 Finding places succeed !!!');\r\n         setLog(LOG);\r\n         setLastResult(lastResult);\r\n         setSuggest(suggests);\r\n      }\r\n   };\r\n   const reset = () => {\r\n      setSelectedOption(null);\r\n      setEvents(null);\r\n      setLog(null);\r\n      setLastResult(null);\r\n      setSuggest(null);\r\n   };\r\n\r\n   return (\r\n      <div className='container'>\r\n         <div className='row justify-content-center pt-5 mt-5 '>\r\n            <Select\r\n               closeMenuOnSelect={events ? true : false}\r\n               value={selectedOption}\r\n               onChange={(e) => handleChange(e)}\r\n               isMulti={events ? false : true}\r\n               className='w-50'\r\n               isDisabled={lastResult !== null ? true : false}\r\n               options={selectData}\r\n               placeholder='Chọn sự kiện...'\r\n            />\r\n            <button type='button' className='btn btn-primary mx-1' onClick={() => handleOnClick()}>\r\n               {events ? 'Tìm địa điểm' : 'Thêm tập sự kiện'}\r\n            </button>\r\n            {events ? (\r\n               <button type='button' className='btn  btn-light mx-1' onClick={() => reset()}>\r\n                  Chọn lại\r\n               </button>\r\n            ) : null}\r\n         </div>\r\n         <div className='row justify-content-center mt-5 mb-3'>\r\n            {events && (\r\n               <div className='alert alert-success mt-5' role='alert'>\r\n                  {events.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele.split(': ')[1]}</b>\r\n                        {index !== events.length - 1 ? '  ^  ' : ' => '}\r\n                     </span>\r\n                  ))}\r\n                  {lastResult !== null && lastResult.length === 1 ? (\r\n                     <b>{lastResult[0]}</b>\r\n                  ) : lastResult !== null && lastResult.length > 1 ? (\r\n                     <b>{lastResult.map((item) => item.split(': ')[1]).join(' v ')}</b>\r\n                  ) : lastResult === null ? null : (\r\n                     <span className='badge badge-danger' style={{ fontSize: '1rem' }}>\r\n                        Không có kết quả\r\n                     </span>\r\n                  )}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className='row justify-content-center'>\r\n            {suggest && suggest.length && (\r\n               <div className='alert alert-info' role='alert'>\r\n                  <span className='badge badge-warning' style={{ fontSize: '1rem' }}>\r\n                     Gợi ý:\r\n                  </span>{' '}\r\n                  {suggest.map((ele, index) => (\r\n                     <span key={index}>\r\n                        <b>{ele}</b>\r\n                        {index !== suggest.length - 1 ? '    v    ' : null}\r\n                     </span>\r\n                  ))}\r\n               </div>\r\n            )}\r\n         </div>\r\n         <div className='row mt-5 pb-5 justify-content-between'>\r\n            {log ? (\r\n               <table className='table table-bordered table-hover bg-white col-12'>\r\n                  <thead className='thead-dark'>\r\n                     <tr>\r\n                        <th scope='col'>Quá trình thực hiện thuật toán</th>\r\n                     </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                     {log.map((item, index) => (\r\n                        <tr key={index}>\r\n                           <td\r\n                              className={\r\n                                 item.includes('Lần duyệt thứ') ||\r\n                                 item.includes('=> Xét luật') ||\r\n                                 item.includes('Xét riêng') ||\r\n                                 item.includes('Xét toàn') ||\r\n                                 item.includes('Lọc các kết quả ngoại lệ') ||\r\n                                 item.includes('Chọn ra các kết quả trùng lặp')\r\n                                    ? 'text-left font-weight-bold'\r\n                                    : item.includes('Tìm thấy')\r\n                                    ? 'alert-success pl-5 text-left'\r\n                                    : item.includes('Không tìm')\r\n                                    ? 'alert-danger pl-5 text-left'\r\n                                    : item.includes('lọc trùng')\r\n                                    ? 'alert-secondary pl-5 text-left'\r\n                                    : item.includes('Kết quả cuối cùng')\r\n                                    ? 'alert-warning pl-5 text-left'\r\n                                    : item.includes('Kết thúc thuật toán')\r\n                                    ? 'alert-dark text-left'\r\n                                    : item.includes('Phát hiện sự kiện')\r\n                                    ? 'alert-info text-left'\r\n                                    : 'text-left'\r\n                              }>\r\n                              {item}\r\n                           </td>\r\n                        </tr>\r\n                     ))}\r\n                  </tbody>\r\n               </table>\r\n            ) : null}\r\n         </div>\r\n      </div>\r\n   );\r\n}\r\n","import Manu from './components/Menu';\nimport CreateRules from './components/CreateRules';\nimport Events from './components/Events';\nimport Rules from './components/Rules';\nimport ManageEvents from './components/ManageEvents';\nimport FindPlaces from './components/FindPlaces';\nimport { useState, useEffect } from 'react';\nimport * as api from './apis';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { PageType } from './config/PageType';\n\nfunction App() {\n   const [selectData, setSelectData] = useState([]);\n   const [rules, setRules] = useState([]);\n   const [page, setPage] = useState(PageType.CREATE_RULES);\n\n   const getAllRules = async () => {\n      const res = await api.getAllRules();\n      let data = [...res.data.data];\n\n      data.forEach((element) => {\n         element.events.sort();\n      });\n      data.sort((a, b) => {\n         return a.events[0]\n            .split(':')[0]\n            .localeCompare(b.events[0].split(':')[0]);\n      });\n      data.sort((a, b) => {\n         return a.events.length - b.events.length;\n      });\n      res.data.data = data;\n      return res.data;\n   };\n\n   useEffect(() => {\n      toast.info('🔄 Loading data !!!', {\n         position: 'bottom-right',\n         autoClose: false,\n         hideProgressBar: false,\n         closeOnClick: false,\n         pauseOnHover: false,\n         draggable: false,\n         progress: undefined,\n      });\n      const getData = async () => {\n         const res = await api.getGroupEvents();\n         const res1 = await getAllRules();\n         if (res.data.code === 1 && res1.code === 1) {\n            setSelectData(res.data.data);\n            setRules(res1.data);\n\n            toast.dismiss();\n            toast.success('🚀 Loading select succeed !!!');\n         } else {\n            toast.error('🔥 Loading data failed !!!');\n         }\n      };\n\n      getData();\n   }, []);\n\n   const loadAllRule = async () => {\n      const res = await getAllRules();\n\n      if (res.code === 1) {\n         setRules(res.data);\n\n         toast.dismiss();\n         toast.success('🚀 Reloading all rule succeed !!!');\n      } else {\n         toast.error('🔥 Reloading all rule failed !!!');\n      }\n   };\n\n   const getAllEvents = async () => {\n      let res = null;\n      try {\n         res = await api.getAllEvents();\n         if (res.data.code !== 1) {\n            toast.error('🔥 Loading all events failed !!!');\n            return;\n         }\n      } catch (e) {\n         toast.error('🔥 Loading all events failed !!!');\n      }\n\n      return res.data.data.map((item) => `${item}\\n`);\n   };\n\n   const convertResults = () => {\n      return rules.map((item, index) => {\n         let REULTS = item.result.split(':')[0];\n         let string = '';\n         for (let i = 0; i < item.events.length; i++) {\n            string += item.events[i].split(':')[0];\n\n            let tmp = ' ^ ';\n            if (i === item.events.length - 1) tmp = ' => ';\n\n            string += tmp;\n         }\n\n         return `R${index + 1}: ${string}${REULTS}\\n`;\n      });\n   };\n\n   const renderPage = () => {\n      switch (page) {\n         case PageType.FIND_PLACES:\n            return (\n               <FindPlaces\n                  selectData={selectData}\n                  loadAllRule={loadAllRule}\n                  rules={rules}\n               >\n                  {rules.length !== 0 ? <Rules rules={rules} /> : null}\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </FindPlaces>\n            );\n         case PageType.MANAGE_EVENTS:\n            return (\n               <ManageEvents\n                  selectData={selectData}\n                  loadAllRule={loadAllRule}\n                  rules={rules}\n               >\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </ManageEvents>\n            );\n         default:\n            return (\n               <CreateRules selectData={selectData} loadAllRule={loadAllRule}>\n                  {rules.length !== 0 ? <Rules rules={rules} /> : null}\n                  {selectData.length !== 0 ? (\n                     <Events events={selectData} />\n                  ) : null}\n               </CreateRules>\n            );\n      }\n   };\n   return (\n      <>\n         <Manu\n            rules={convertResults}\n            getAllEvents={getAllEvents}\n            setPage={setPage}\n         />\n         {renderPage()}\n         <ToastContainer\n            position=\"bottom-right\"\n            autoClose={5000}\n            hideProgressBar={false}\n            newestOnTop={false}\n            rlt={false}\n            pauseOnHover\n            pauseOnFocusLoss\n            closeOnClick\n            draggable\n         />\n      </>\n   );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './styles/styles.scss';\nReactDOM.render(\n   <React.StrictMode>\n      <App />\n   </React.StrictMode>,\n   document.getElementById('root')\n);\n"],"sourceRoot":""}